(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{69493:function(e,t,a){Promise.resolve().then(a.bind(a,73651))},73651:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var s=a(57437),i=a(2265),r=a(33145);a(48646);let o={logo:{src:"/_next/static/media/logo.9b7e2eed.png",height:34,width:173,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAFVBMVEX/SyP/SyP/TCT/TCT/SyX/TCL/TCO6osRBAAAAB3RSTlN/mlQ7Sm6Qb3y0bwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABpJREFUeJxjYGBmYmJmYmBhYGBkYGBkY2UEAAELAB9wFUuZAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2},basket_icon:{src:"/_next/static/media/basket_icon.f06f575e.png",height:30,width:29,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAJ1BMVEVGUH9IVX5KVoBIVH1IVX1IVX5JVX1KV4FIVX9IVHxIVH5KVn9PXIm5btyJAAAAC3RSTlMF9992hZzBZR6vbdd9bSwAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA3SURBVHicHcKJDQAxCASxWSDkWfqv96SzDKw/7IJ6cC1bvljd3TLhyiwHayIzZrFHkmZzwrbjfCizAVIKl7lyAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},search_icon:{src:"/_next/static/media/search_icon.424a97b6.png",height:27,width:27,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAHlBMVEVMaXFIVX5IVH1IVH5JVH1ATXNHVX5LVn9IVHlKVHz2MxD+AAAACnRSTlMAkXifZwYcOCxQMCdu8gAAAAlwSFlzAAALEwAACxMBAJqcGAAAADFJREFUeJwtyskNACAMxMDZhKv/ihESP8s2o9MDI6iip0mWeFRb++blP6aSPlh7OX0BETMAiSLSWQkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},profile_icon:{src:"/_next/static/media/profile_icon.db7957ea.png",height:32,width:26,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAAJFBMVEVKVn9MaXFIU31HVHxIVX1IU31VVapLVH5NWoZIVH1IVX5PXIiq/GICAAAAC3RSTlP9AFJpS6IDLfPNzBxrKLAAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVHicFcGBEcAgDAOxd5wArfffl0NCHVJCnaTFUk1poW17C5MEc3gOEyCD6uMvXR7nAOplch9xAAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8},logout_icon:{src:"/_next/static/media/logout_icon.a8075acd.png",height:32,width:32,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAGFBMVEX/aUj/Ykf/ZEj/Y0hMaXH/Y0j/Y0f/ZlUOB9AyAAAACHRSTlMHRYdRADRyDwMDiNQAAAAJcEhZcwAACxMAAAsTAQCanBgAAAArSURBVHicVYtLCgAgEIV8n+r+Nw6CWbQTVLqirBYcxRQ2RQ+OZH8wauLZLxdOAKW7NL72AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},bag_icon:{src:"/_next/static/media/bag_icon.e86225ee.png",height:32,width:32,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAFVBMVEX/V0D/YkX/Y0f/Y0P/Ykb/Y0b/YUbcmzpEAAAAB3RSTlMCYlQZI4dv9IGuwgAAAAlwSFlzAAALEwAACxMBAJqcGAAAACtJREFUeJxth7ENADAMg0xs9/+Tq6hrWQBJgWg5yVlT6EievfEn8iJyAeoLDw4AbBWNXZMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}};var l=a(99376);a(45592);var n=a(51268),c=a(35217);a(14474);var d=e=>{let{setShowSearchPopup:t}=e,[a,d]=(0,i.useState)(!1),[h,m]=(0,i.useState)(""),[u,g]=(0,i.useState)(""),[A,p]=(0,i.useState)([]),[f,x]=(0,i.useState)([]),[j,y]=(0,i.useState)(!1),[N,v]=(0,i.useState)(""),[b,w]=(0,i.useState)([]),[S,C]=(0,i.useState)(0),I=(0,l.useRouter)(),[k,E]=(0,i.useState)(!0);(0,i.useEffect)(()=>{d(!0)},[]),(0,i.useEffect)(()=>{if(a){let e=JSON.parse(localStorage.getItem("cartItems"))||[];w(e),C(e.reduce((e,t)=>e+t.quantity,0)),(async()=>{if(!O())try{y(!0);let e=await fetch("/api/categories");if(e.ok){let t=await e.json();p(t)}else throw Error("Failed to fetch categories")}catch(e){v(e.message)}finally{y(!1)}})()}},[a]);let T=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{y(!0);let a=await fetch("/api/selectitem?category=".concat(e,"&searchText=").concat(t));if(a.ok){let e=await a.json();x(e)}else throw Error("Failed to fetch items")}catch(e){v(e.message)}finally{y(!1)}};(0,i.useEffect)(()=>{""===h.trim()||u?x([]):T("",h)},[h]);let _=e=>{m(""),g(e),T(e)},O=()=>{let e=localStorage.getItem("token");if(e)try{let a=jwt_decode(e);if(a&&1e3*a.exp<Date.now())return localStorage.removeItem("token"),t(!1),setShowLoginPopup(!0),!0}catch(e){console.error("Error decoding token:",e)}return!1},V=async e=>{let t;if(O())return;let a=b.findIndex(t=>t.foodId._id===e._id);if(a>-1){t=[...b],t[a].quantity+=1,w(t);try{let s=localStorage.getItem("token");if(!s)throw Error("No token found. Please log in first.");let i=await fetch("/api/cart/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,foodId:e._id,quantity:t[a].quantity})}),r=await i.json();i.ok&&r.success||console.error("Failed to update item quantity:",r.message)}catch(e){console.error("Error updating item quantity:",e)}}else{w(t=[...b,{foodId:e,quantity:1}]);try{let t=localStorage.getItem("token");if(!t)throw Error("No token found. Please log in first.");let a=await fetch("/api/cart/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,foodId:e._id,quantity:1,imageUrl:e.imageUrl,name:e.name,price:e.price})}),s=await a.json();a.ok&&s.success||console.error("Failed to add item to cart:",s.message)}catch(e){console.error("Error adding item to cart:",e)}}},P=async e=>{let t;if(O())return;let a=b.findIndex(t=>t.foodId._id===e._id);if(a>-1){let s={...b[a]};if(s.quantity>1){s.quantity-=1,(t=[...b])[a]=s,w(t);try{let t=localStorage.getItem("token");if(!t)throw Error("No token found. Please log in first.");let a=await fetch("/api/cart/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,foodId:e._id,quantity:s.quantity})}),i=await a.json();a.ok&&i.success||console.error("Failed to update item quantity:",i.message)}catch(e){console.error("Error updating item quantity:",e)}}else{w(t=b.filter(t=>t.foodId._id!==e._id));try{let t=localStorage.getItem("token");if(!t)throw Error("No token found. Please log in first.");let a=await fetch("/api/cart/remove",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,foodId:e._id})}),s=await a.json();a.ok&&s.success||console.error("Failed to remove item from cart:",s.message)}catch(e){console.error("Error removing item from cart:",e)}}}};return(0,i.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e){v("No token found. Please log in."),E(!1);return}try{let t=await fetch("/api/cart/get",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();t.ok?a.cartItems&&0===a.cartItems.length?(w([]),v("")):w(a.cartItems):v(a.message||"Failed to fetch cart data")}catch(e){console.error("Error fetching cart:",e),v("Error fetching cart data")}finally{E(!1)}})()},[]),(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/categories"),t=await e.json();e.ok?p(t.categories):v("Failed to load categories")}catch(e){console.error("Error fetching categories:",e),v("Error fetching categories")}})()},[]),(0,s.jsx)("div",{className:"search-popup-overlay",children:(0,s.jsxs)("div",{className:"search-popup",children:[(0,s.jsx)("div",{className:"search-popup-header",children:(0,s.jsx)("h2",{children:"Search Items"})}),(0,s.jsx)("div",{className:"search-popup-body",children:(0,s.jsxs)("div",{className:"search-input-container",children:[(h||u)&&(0,s.jsx)("div",{className:"arrow-icon-button",onClick:()=>{g(""),m(""),x([])},children:(0,s.jsx)(n.G,{icon:c.acZ,className:"arrow-icon"})}),(0,s.jsx)("input",{type:"text",className:"search-popup-input",placeholder:u?"".concat(u):"Search for items...",value:h,onChange:e=>m(e.target.value),disabled:!!u}),h||u?(0,s.jsx)("button",{className:"clear-category-button",onClick:()=>{m(""),g(""),x([])},children:"\xd7"}):(0,s.jsx)("button",{className:"search-icon-button",children:(0,s.jsx)(r.default,{src:o.search_icon,alt:"Search",className:"searchButton"})})]})}),(0,s.jsxs)("div",{className:"search-popup-categories",children:[(0,s.jsx)("div",{className:"categories-title2",children:!u&&!h&&(0,s.jsx)("div",{className:"categories-title1",children:"Popular Cuisines"})}),h||u?(0,s.jsx)("div",{className:"filtered-items",children:j?(0,s.jsx)("p",{className:"loading-item",children:"Loading items..."}):N?(0,s.jsx)("p",{className:"error",children:N}):f.length>0?(0,s.jsx)("div",{className:"items-list",children:f.map(e=>{var t;return(0,s.jsxs)("div",{className:"item-row",children:[(0,s.jsx)("div",{className:"item-image",children:(0,s.jsx)("img",{src:e.imageUrl,alt:e.name})}),(0,s.jsxs)("div",{className:"item-details",children:[(0,s.jsx)("p",{className:"item-name",children:e.name}),(0,s.jsx)("p",{className:"item-description",children:"Dish"})]}),(0,s.jsx)("div",{children:b.some(t=>t.foodId&&t.foodId._id===e._id)?(0,s.jsxs)("div",{className:"quantity-controls",children:[(0,s.jsx)("button",{className:"quantity-decrease",onClick:()=>P(e),children:"-"}),(0,s.jsx)("span",{className:"quantity",children:null===(t=b.find(t=>t.foodId._id===e._id))||void 0===t?void 0:t.quantity}),(0,s.jsx)("button",{className:"quantity-increase",onClick:()=>V(e),children:"+"})]}):(0,s.jsx)("button",{className:"add-to-cart",onClick:()=>V(e),children:"Add"})})]},e._id)})}):(0,s.jsxs)("p",{className:"empty",children:["No items found for ",u||h,"."]})}):(0,s.jsx)("div",{className:"categories-list1",children:j?(0,s.jsx)("p",{className:"loading-item",children:"Loading categories..."}):N?(0,s.jsx)("p",{className:"error",children:N}):A.length>0?(0,s.jsx)("div",{className:"categories-container",children:A.map((e,t)=>(0,s.jsxs)("div",{className:"category-item1 ".concat(t<A.length-3?"has-border":""),onClick:()=>_(e.name),children:[(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"img1"}),(0,s.jsx)("p",{children:e.name})]},e._id))}):(0,s.jsx)("p",{className:"empty",children:"No categories found."})})]}),(0,s.jsxs)("div",{className:"cart-close",children:[(0,s.jsx)("button",{className:"search-popup-close",onClick:()=>t(!1),children:"Close"}),b.length>0&&(0,s.jsxs)("button",{onClick:()=>{I&&(t(!1),I.push("/Cart"))},className:"go-to-cart-button",children:["Go to Cart (",b.reduce((e,t)=>e+t.quantity,0),")"]})]})]})})},h=e=>{let{isLoggedIn:t,setShowLogin:a,handleLogout:n}=e,[c,h]=(0,i.useState)(!1),m=(0,l.useRouter)(),u=(0,l.usePathname)(),[g,A]=(0,i.useState)(null),[p,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("token");e?A(e):t()},t=()=>{localStorage.removeItem("token"),A(null),a(!0),m.push("/")};e();let s=setInterval(e,5e3);return()=>clearInterval(s)},[m,a]);let x=async()=>{h(!0),setTimeout(async()=>{g?await m.push("/Cart"):a(!0),h(!1)},1500)};return(0,s.jsxs)("nav",{className:"navbar",children:[(0,s.jsx)("div",{className:"logo",children:(0,s.jsx)("a",{href:"/",children:(0,s.jsx)(r.default,{src:o.logo,alt:"Logo"})})}),(0,s.jsx)("div",{className:"navbar-menu",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/",className:"/"===u?"active":"",children:"Home"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/About-us",className:"/About-us"===u?"active":"",children:"About us"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/",className:"/Blog"===u?"active":"",children:"Blog"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#footer",className:"/Contact-us"===u?"active":"",children:"Contact us"})})]})}),(0,s.jsx)("div",{className:"navbar-right basket",children:(0,s.jsx)(r.default,{onClick:()=>{"/"===u&&(g?f(!0):a(!0))},src:o.search_icon,alt:"Search",className:"searchButton ".concat("/"!==u?"disabled":""),style:"/"!==u?{cursor:"not-allowed"}:{}})}),(0,s.jsx)("div",{className:"navbar-search-icon",children:c?(0,s.jsx)("div",{className:"spinner"}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"basket",children:[(0,s.jsx)(r.default,{src:o.basket_icon,alt:"Cart",onClick:x,className:"basketIcon"}),(0,s.jsx)("div",{className:"dot"})]})})}),g?(0,s.jsxs)("div",{className:"navbar-profile",children:[(0,s.jsx)(r.default,{src:o.profile_icon,alt:"Profile"}),(0,s.jsxs)("ul",{className:"nav-profile-dropdown",children:[(0,s.jsxs)("li",{onClick:()=>{g?m.push("/MyOrder"):a(!0)},children:[(0,s.jsx)(r.default,{src:o.bag_icon,alt:"Order"}),(0,s.jsx)("p",{children:"Orders"})]}),(0,s.jsx)("hr",{}),(0,s.jsxs)("li",{onClick:n,children:[(0,s.jsx)(r.default,{src:o.logout_icon,alt:"Logout"}),(0,s.jsx)("p",{children:"Logout"})]})]})]}):(0,s.jsx)("button",{onClick:()=>a(!0),className:"signInButton",children:"Sign In"}),p&&(0,s.jsx)(d,{setShowSearchPopup:f})]})};a(72722);var m=()=>{let[e,t]=(0,i.useState)(null),[a,r]=(0,i.useState)(!0),[o,l]=(0,i.useState)(null);return((0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/headerImage"),a=await e.json();a.length>0?t(a[0]):l("No header images found")}catch(e){l("Error fetching header images"),console.error("Error fetching header images:",e)}finally{r(!1)}})()},[]),a)?(0,s.jsx)("div",{className:"header-loader",children:(0,s.jsx)("div",{className:"loader"})}):o?(0,s.jsx)("div",{className:"header-error",children:(0,s.jsx)("h3",{children:o})}):(0,s.jsx)("div",{className:"header",style:{backgroundImage:"url(".concat((null==e?void 0:e.imagePath)||"/header_img.png",")")},children:(0,s.jsxs)("div",{className:"header-contents",children:[(0,s.jsx)("h2",{children:(null==e?void 0:e.title)||"Default Title"}),(0,s.jsx)("p",{children:(null==e?void 0:e.description)||"Default Description"}),(0,s.jsx)("a",{href:(null==e?void 0:e.url)||"#",children:(0,s.jsx)("button",{children:"View Menu"})})]})})};a(53320);var u=e=>{let{category:t,setCategory:a}=e,[r,o]=(0,i.useState)([]),[l,n]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null);return((0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/categories"),t=await e.json();t.length>0?o(t):d("No categories found")}catch(e){console.error("Failed to fetch categories:",e),d("Failed to fetch categories")}finally{n(!1)}})()},[]),l)?(0,s.jsx)("div",{className:"explore-menu-loader",children:(0,s.jsx)("div",{className:"loader"})}):c?(0,s.jsx)("div",{className:"explore-menu-error",children:(0,s.jsx)("h3",{children:c})}):(0,s.jsxs)("div",{className:"explore-menu",id:"explore-menu",children:[(0,s.jsx)("h1",{children:"Explore our menu"}),(0,s.jsx)("p",{className:"explore-menu-text1",children:"Choose from a diverse menu featuring a delectable array of dishes. Our mission is to satisfy your craving and elevate your dining experience, one delicious meal at a time."}),(0,s.jsx)("div",{className:"explore-menu-list",children:r.map(e=>(0,s.jsxs)("div",{className:"explore-menu-list-item ".concat(t===e.name?"active":""),onClick:()=>a(t=>t===e.name?"All":e.name),children:[(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"img"}),(0,s.jsx)("p",{className:"explore-menu-text",children:e.name})]},e.name))}),(0,s.jsx)("hr",{})]})};a(62172);var g=e=>{let{category:t,setShowCart:a,isLoggedIn:r,setShowLogin:o}=e,[l,n]=(0,i.useState)([]),[c,d]=(0,i.useState)(!0),[h,m]=(0,i.useState)(null),[u,g]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/items");if(!e.ok)throw Error("Network response was not ok");let t=await e.json();n(t)}catch(e){m("Error fetching items: "+e.message)}finally{d(!1)}})()},[]),(0,i.useEffect)(()=>{(async()=>{if(!r)return;let e=localStorage.getItem("token");if(!e){m("No token found. Please log in.");return}try{let t=await fetch("/api/cart/get",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();t.ok?g(a.cartItems||[]):m(a.message||"Failed to fetch cart data")}catch(e){console.error("Error fetching cart:",e),m("Error fetching cart data")}})()},[r]);let A="All"===t?l:l.filter(e=>e.category===t),p=async e=>{let t;if(!r){o(!0);return}if(j())return;let a=u.findIndex(t=>t.foodId._id===e._id);if(a>-1){t=[...u],t[a].quantity+=1,g(t);try{let s=localStorage.getItem("token"),i=await fetch("/api/cart/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,foodId:e._id,quantity:t[a].quantity})}),r=await i.json();i.ok&&r.success||console.error("Failed to update item quantity:",r.message)}catch(e){console.error("Error updating item quantity:",e)}}else{g(t=[...u,{foodId:e,quantity:1}]);try{let t=localStorage.getItem("token"),a=await fetch("/api/cart/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,foodId:e._id,quantity:1,imageUrl:e.imageUrl,name:e.name,price:e.price})}),s=await a.json();a.ok&&s.success||console.error("Failed to add item to cart:",s.message)}catch(e){console.error("Error adding item to cart:",e)}}},f=async e=>{let t;if(!r){o(!0);return}if(j())return;let a=u.findIndex(t=>t.foodId._id===e._id);if(a>-1){let s={...u[a]};if(s.quantity>1){s.quantity-=1,(t=[...u])[a]=s,g(t);try{let t=localStorage.getItem("token"),a=await fetch("/api/cart/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,foodId:e._id,quantity:s.quantity})}),i=await a.json();a.ok&&i.success||console.error("Failed to update item quantity:",i.message)}catch(e){console.error("Error updating item quantity:",e)}}else{g(t=u.filter(t=>t.foodId._id!==e._id));try{let t=localStorage.getItem("token"),a=await fetch("/api/cart/remove",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,foodId:e._id})}),s=await a.json();a.ok&&s.success||console.error("Failed to remove item from cart:",s.message)}catch(e){console.error("Error removing item from cart:",e)}}}},x=(e,t)=>e-t/100*e,j=()=>{let e=localStorage.getItem("token");if(e)try{let t=jwt_decode(e);if(1e3*t.exp<Date.now())return localStorage.removeItem("token"),o(!0),!0}catch(e){console.error("Error decoding token:",e)}return!1};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3 animate-pulse mb-4",children:(0,s.jsx)("h2",{className:"title",children:"Top dishes near you"})}),c?(0,s.jsx)("div",{className:"food-display animate-pulse",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"food-display-list mb-6",children:[(0,s.jsxs)("div",{className:"add-food mb-4",children:[(0,s.jsx)("div",{className:"h-24 bg-gray-200 rounded w-full"}),(0,s.jsx)("div",{className:"h-12 bg-gray-200 rounded w-full mt-2"})]}),(0,s.jsxs)("div",{className:"name-reting mb-2",children:[(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-1"}),(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/2"})]}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,s.jsx)("div",{className:"food-price",children:(0,s.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/4"})})]},t))}):h?(0,s.jsx)("p",{children:h}):(0,s.jsx)("div",{className:"food-display grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:0===A.length?(0,s.jsx)("p",{children:"No items available in this category."}):A.map(e=>{let t=e.discount>0?x(e.price,e.discount):null,a=u.find(t=>t.foodId._id===e._id),i=a?a.quantity:0;return(0,s.jsxs)("div",{className:"food-display-list bg-white shadow rounded p-4",children:[(0,s.jsxs)("div",{className:"add-food relative",children:[(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"food-img rounded-lg"}),e.discount>0&&(0,s.jsxs)("p",{className:"food-discount bg-red-500 text-white text-xs rounded px-2 py-1 absolute top-2 left-2",children:[e.discount,"% OFF"]}),(0,s.jsx)("div",{className:"nonveg absolute top-2 right-2",children:"Non-Veg"===e.vegOrNonVeg?(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 100 100",children:[(0,s.jsx)("rect",{x:"5",y:"5",width:"90",height:"90",fill:"none",stroke:"red",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"50",cy:"50",r:"30",fill:"red"})]}):(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 100 100",children:[(0,s.jsx)("rect",{x:"5",y:"5",width:"90",height:"90",fill:"none",stroke:"green",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"50",cy:"50",r:"30",fill:"green"})]})}),r&&i>0?(0,s.jsxs)("div",{className:"food-item-counter flex items-center justify-center mt-2",children:[(0,s.jsx)("img",{onClick:()=>f(e),src:"remove_icon_red.png",alt:"Remove",className:"cursor-pointer"}),(0,s.jsx)("p",{className:"mx-2",children:i}),(0,s.jsx)("img",{onClick:()=>p(e),src:"add_icon_green.png",alt:"Add",className:"cursor-pointer"})]}):(0,s.jsx)("img",{className:"add-icon cursor-pointer mt-2",onClick:()=>p(e),src:"add_icon_white.png",alt:"Add"})]}),(0,s.jsxs)("div",{className:"name-reting mt-4",children:[(0,s.jsx)("h2",{className:"food-name font-semibold text-lg",children:e.name}),(0,s.jsx)("img",{src:"rating_starts.png",alt:"img",className:"reting mt-1"})]}),(0,s.jsx)("p",{className:"food-description text-gray-600 mt-2",children:e.description}),(0,s.jsxs)("div",{className:"food-price flex items-center mt-4",children:[e.discount>0&&(0,s.jsxs)("div",{className:"price-show flex items-baseline",children:[(0,s.jsxs)("p",{className:"discounted-price text-red-500 font-bold",children:["₹",t]}),(0,s.jsx)("div",{className:"space-left ml-2",children:(0,s.jsxs)("p",{className:"original-price line-through text-gray-400",children:["₹",e.price]})})]}),0===e.discount&&(0,s.jsxs)("p",{className:"text-gray-700 font-bold",children:["₹",e.price]})]})]},e._id)})})]})};a(25448);var A=()=>{let e=(0,l.useRouter)();return(0,s.jsxs)("div",{className:"footer",id:"footer",children:[(0,s.jsxs)("div",{className:"footer-content",children:[(0,s.jsxs)("div",{className:"footer-content-left",children:[(0,s.jsxs)("a",{href:"http://localhost:3000/",children:["   ",(0,s.jsx)("img",{src:"/logo.png",alt:"Logo"})]}),(0,s.jsx)("p",{children:"Welcome to our food website, where we bring you an exquisite collection of mouth-watering dishes that cater to every taste. Explore our diverse categories, including salads, rolls, desserts, sandwiches, cakes, pure veg, pasta, and noodles."}),(0,s.jsxs)("div",{className:"footer-social-icon",children:[(0,s.jsx)("img",{src:"/facebook_icon.png",alt:"Facebook"}),(0,s.jsx)("img",{src:"/twitter_icon.png",alt:"Twitter"}),(0,s.jsx)("img",{src:"/linkedin_icon.png",alt:"LinkedIn"})]})]}),(0,s.jsxs)("div",{className:"footer-content-center",children:[(0,s.jsx)("h2",{children:"COMPANY"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{onClick:()=>{e.push("MyOrder")},children:"My Order"}),(0,s.jsx)("li",{onClick:()=>{e.push("TermsAndConditions")},children:"  Terms and Conditions"}),(0,s.jsx)("li",{onClick:()=>{e.push("Privacy-policy")},children:"Privacy policy"}),(0,s.jsx)("li",{onClick:()=>{e.push("Refund-and-Return-Policy")},children:" Refund and Return Policy"})]})]}),(0,s.jsxs)("div",{className:"footer-content-right",children:[(0,s.jsx)("h2",{children:"GET IN TOUCH"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"+91-9001498993"}),(0,s.jsx)("li",{children:"info@temoto.com"})]})]})]}),(0,s.jsx)("hr",{}),(0,s.jsxs)("p",{className:"footer-copyright",children:["Copyright 2024 \xa9",(0,s.jsx)("a",{href:"http://localhost:3000/",children:" Tomato.com"})," - All Right Reserved."]})]})};a(39294);var p=a(7409);a(2648);let f=[{code:"+91",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{code:"+1",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"+44",flag:"\uD83C\uDDEC\uD83C\uDDE7"}];var x=e=>{let{setShowLogin:t,setIsLoggedIn:a}=e,[r,o]=(0,i.useState)("Enter details"),[l,n]=(0,i.useState)({mobileNumber:"",countryCode:"+91",otp:""}),[c,d]=(0,i.useState)(null),[h,m]=(0,i.useState)(!1),[u,g]=(0,i.useState)(!1),[A,x]=(0,i.useState)(0),[j,y]=(0,i.useState)(0),[N,v]=(0,i.useState)(!1);(0,i.useRef)(null),(0,i.useEffect)(()=>{if(h&&A>0){let e=setInterval(()=>{x(e=>e>0?e-1:0)},1e3);return()=>clearInterval(e)}},[h,A]);let b=e=>{n({...l,[e.target.name]:e.target.value})},w=10===l.mobileNumber.length,S=6===l.otp.length,C=async e=>{e.preventDefault(),d(null),g(!0);try{if("Enter details"===r){if(!/^\d{10}$/.test(l.mobileNumber)){d("Please enter a valid 10-digit mobile number"),g(!1);return}let e=await fetch("/api/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mobileNumber:"".concat(l.countryCode).concat(l.mobileNumber)})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to send OTP");m(!0),x(60),o("Verify OTP"),p.Am.success("OTP sent successfully")}else if("Verify OTP"===r){let e=l.otp;if(6!==e.length){d("Please enter the complete OTP"),g(!1);return}let s=await fetch("/api/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mobileNumber:"".concat(l.countryCode).concat(l.mobileNumber),otp:e})}),i=await s.json();if(!s.ok)throw Error(i.error||"Invalid OTP");let r=new Date().getTime();localStorage.setItem("token",i.token),localStorage.setItem("tokenExpiry",r+36e5),p.Am.success("Login successful"),a(!0),t(!1)}}catch(e){d(e.message)}finally{g(!1)}},I=async()=>{if(A>0){p.Am.info("Please wait until the OTP expires");return}if(j>=3){x(900),p.Am.warning("Too many attempts. Please try again after 15 minutes.");return}g(!0),d(null);try{let e=await fetch("/api/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mobileNumber:"".concat(l.countryCode).concat(l.mobileNumber)})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to resend OTP");x(60),y(e=>e+1),p.Am.success("OTP resent successfully")}catch(e){d(e.message)}finally{g(!1)}};return(0,s.jsxs)("div",{className:"login-popup",children:[(0,s.jsx)(p.Ix,{}),(0,s.jsxs)("form",{className:"login-popup-container",onSubmit:C,children:[(0,s.jsxs)("div",{className:"login-popup-title",children:[(0,s.jsx)("h2",{children:r}),(0,s.jsx)("img",{onClick:()=>t(!1),src:"/cross_icon.png",alt:"Close",className:"login-cross"})]}),c&&(0,s.jsx)("p",{className:"error",children:c}),(0,s.jsxs)("div",{className:"login-popup-inputs",children:["Enter details"===r&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"country-code-dropdown",children:[(0,s.jsx)("select",{name:"countryCode",value:l.countryCode,onChange:b,children:f.map((e,t)=>(0,s.jsxs)("option",{value:e.code,children:[e.flag," ",e.code]},t))}),(0,s.jsx)("div",{className:"mobile-number-input",children:(0,s.jsx)("input",{type:"number",name:"mobileNumber",placeholder:"Your mobile number",value:l.mobileNumber,onChange:b,disabled:h,required:!0,pattern:"\\d{10}",onFocus:()=>v(!0),title:"Please enter exactly 10 digits."})})]})}),h&&(0,s.jsx)("div",{className:"otp-input",children:(0,s.jsx)("input",{type:N?"text":"password",name:"otp",placeholder:"•  •  •  •  •  •",value:l.otp,onChange:e=>{let t=e.target.value;/^\d{0,6}$/.test(t)&&n({...l,otp:t})},onFocus:()=>v(!0),onBlur:()=>v(!1),required:!0})})]}),(0,s.jsxs)("div",{className:"button-container",children:[!h&&(0,s.jsx)("button",{type:"submit",disabled:!w||u,children:u?"Sending...":"Send OTP"}),h&&(0,s.jsx)("button",{type:"submit",disabled:!S||u,children:u?"Verifying...":"Verify OTP"}),h&&A>0&&(0,s.jsxs)("p",{className:"otp-expiry-info",children:["Resend OTP in: ",(e=>{let t=Math.floor(e/60),a=e%60;return t>0?"".concat(t,"m:").concat(a,"s"):"".concat(a,"s")})(A)]})]}),h&&0===A&&(0,s.jsxs)("p",{className:"resend-otp",children:["Didn’t receive code?"," ",(0,s.jsx)("span",{className:"request-again",onClick:I,children:"Request again"})]})]})]})},j=()=>{let[e,t]=(0,i.useState)(!1),[a,r]=(0,i.useState)(!1),[o,l]=(0,i.useState)("All"),[n,c]=(0,i.useState)(!1),[d,p]=(0,i.useState)([]);return(0,i.useEffect)(()=>{let e=localStorage.getItem("token");if(e){let a=1e3*JSON.parse(atob(e.split(".")[1])).exp;Date.now()>a?(localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),r(!1),t(!0)):r(!0)}else{let e=setTimeout(()=>{t(!0)},3e3);return()=>clearTimeout(e)}let a=setInterval(()=>{let e=localStorage.getItem("token");if(e){let a=1e3*JSON.parse(atob(e.split(".")[1])).exp;Date.now()>a&&(localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),r(!1),t(!0))}},3e5);return()=>clearInterval(a)},[]),(0,s.jsxs)(s.Fragment,{children:[n&&(0,s.jsx)(CartPopup,{cartItems:d,setShowCart:c,handleRemoveClick:e=>p(d.filter(t=>"item._id"!==e))}),e&&!a&&(0,s.jsx)(x,{setShowLogin:t,setIsLoggedIn:r}),(0,s.jsx)("div",{className:"back-navbar",children:(0,s.jsx)("div",{className:"app",children:(0,s.jsx)("div",{className:"navbar-fixed",children:(0,s.jsx)(h,{isLoggedIn:a,setShowLogin:t,handleLogout:()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),r(!1),t(!0)},setShowCart:c})})})}),(0,s.jsxs)("div",{className:"app",children:[(0,s.jsx)(m,{}),(0,s.jsx)(u,{category:o,setCategory:l}),(0,s.jsx)(g,{category:o,setCartItems:p,cartItems:d,setShowCart:c,isLoggedIn:a,setShowLogin:t})]}),(0,s.jsx)(A,{})]})}},53320:function(){},62172:function(){},25448:function(){},72722:function(){},39294:function(){},48646:function(){},45592:function(){}},function(e){e.O(0,[32,676,766,971,117,744],function(){return e(e.s=69493)}),_N_E=e.O()}]);