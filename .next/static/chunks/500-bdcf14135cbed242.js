(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{72422:function(){},60061:function(){},47578:function(){},5881:function(){},88610:function(){},27875:function(e,t,a){"use strict";var s=a(85893);a(67294),a(60061);var i=a(39332);t.Z=()=>{let e=(0,i.useRouter)();return(0,s.jsxs)("div",{className:"footer",id:"footer",children:[(0,s.jsxs)("div",{className:"footer-content",children:[(0,s.jsxs)("div",{className:"footer-content-left",children:[(0,s.jsxs)("a",{href:"http://localhost:3000/",children:["   ",(0,s.jsx)("img",{src:"/logo.png",alt:"Logo"})]}),(0,s.jsx)("p",{children:"Welcome to our food website, where we bring you an exquisite collection of mouth-watering dishes that cater to every taste. Explore our diverse categories, including salads, rolls, desserts, sandwiches, cakes, pure veg, pasta, and noodles."}),(0,s.jsxs)("div",{className:"footer-social-icon",children:[(0,s.jsx)("img",{src:"/facebook_icon.png",alt:"Facebook"}),(0,s.jsx)("img",{src:"/twitter_icon.png",alt:"Twitter"}),(0,s.jsx)("img",{src:"/linkedin_icon.png",alt:"LinkedIn"})]})]}),(0,s.jsxs)("div",{className:"footer-content-center",children:[(0,s.jsx)("h2",{children:"COMPANY"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{onClick:()=>{e.push("MyOrder")},children:"My Order"}),(0,s.jsx)("li",{onClick:()=>{e.push("TermsAndConditions")},children:"  Terms and Conditions"}),(0,s.jsx)("li",{onClick:()=>{e.push("Privacy-policy")},children:"Privacy policy"}),(0,s.jsx)("li",{onClick:()=>{e.push("Refund-and-Return-Policy")},children:" Refund and Return Policy"})]})]}),(0,s.jsxs)("div",{className:"footer-content-right",children:[(0,s.jsx)("h2",{children:"GET IN TOUCH"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"+91-9001498993"}),(0,s.jsx)("li",{children:"info@temoto.com"})]})]})]}),(0,s.jsx)("hr",{}),(0,s.jsxs)("p",{className:"footer-copyright",children:["Copyright 2024 \xa9",(0,s.jsx)("a",{href:"http://localhost:3000/",children:" Tomato.com"})," - All Right Reserved."]})]})}},15010:function(e,t,a){"use strict";var s=a(85893),i=a(67294);a(47578);var r=a(44173);a(44440);let o=[{code:"+91",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{code:"+1",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"+44",flag:"\uD83C\uDDEC\uD83C\uDDE7"}];t.Z=e=>{let{setShowLogin:t,setIsLoggedIn:a}=e,[n,c]=(0,i.useState)("Enter details"),[l,d]=(0,i.useState)({mobileNumber:"",countryCode:"+91",otp:""}),[A,h]=(0,i.useState)(null),[u,m]=(0,i.useState)(!1),[g,p]=(0,i.useState)(!1),[f,x]=(0,i.useState)(0),[j,y]=(0,i.useState)(0),[b,N]=(0,i.useState)(!1);(0,i.useRef)(null),(0,i.useEffect)(()=>{if(u&&f>0){let e=setInterval(()=>{x(e=>e>0?e-1:0)},1e3);return()=>clearInterval(e)}},[u,f]);let C=e=>{d({...l,[e.target.name]:e.target.value})},v=10===l.mobileNumber.length,S=6===l.otp.length,w=async e=>{e.preventDefault(),h(null),p(!0);try{if("Enter details"===n){if(!/^\d{10}$/.test(l.mobileNumber)){h("Please enter a valid 10-digit mobile number"),p(!1);return}let e=await fetch("/api/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mobileNumber:"".concat(l.countryCode).concat(l.mobileNumber)})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to send OTP");m(!0),x(60),c("Verify OTP"),r.Am.success("OTP sent successfully")}else if("Verify OTP"===n){let e=l.otp;if(6!==e.length){h("Please enter the complete OTP"),p(!1);return}let s=await fetch("/api/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mobileNumber:"".concat(l.countryCode).concat(l.mobileNumber),otp:e})}),i=await s.json();if(!s.ok)throw Error(i.error||"Invalid OTP");let o=new Date().getTime();localStorage.setItem("token",i.token),localStorage.setItem("tokenExpiry",o+36e5),r.Am.success("Login successful"),a(!0),t(!1)}}catch(e){h(e.message)}finally{p(!1)}},k=async()=>{if(f>0){r.Am.info("Please wait until the OTP expires");return}if(j>=3){x(900),r.Am.warning("Too many attempts. Please try again after 15 minutes.");return}p(!0),h(null);try{let e=await fetch("/api/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mobileNumber:"".concat(l.countryCode).concat(l.mobileNumber)})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to resend OTP");x(60),y(e=>e+1),r.Am.success("OTP resent successfully")}catch(e){h(e.message)}finally{p(!1)}};return(0,s.jsxs)("div",{className:"login-popup",children:[(0,s.jsx)(r.Ix,{}),(0,s.jsxs)("form",{className:"login-popup-container",onSubmit:w,children:[(0,s.jsxs)("div",{className:"login-popup-title",children:[(0,s.jsx)("h2",{children:n}),(0,s.jsx)("img",{onClick:()=>t(!1),src:"/cross_icon.png",alt:"Close",className:"login-cross"})]}),A&&(0,s.jsx)("p",{className:"error",children:A}),(0,s.jsxs)("div",{className:"login-popup-inputs",children:["Enter details"===n&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"country-code-dropdown",children:[(0,s.jsx)("select",{name:"countryCode",value:l.countryCode,onChange:C,children:o.map((e,t)=>(0,s.jsxs)("option",{value:e.code,children:[e.flag," ",e.code]},t))}),(0,s.jsx)("div",{className:"mobile-number-input",children:(0,s.jsx)("input",{type:"number",name:"mobileNumber",placeholder:"Your mobile number",value:l.mobileNumber,onChange:C,disabled:u,required:!0,pattern:"\\d{10}",onFocus:()=>N(!0),title:"Please enter exactly 10 digits."})})]})}),u&&(0,s.jsx)("div",{className:"otp-input",children:(0,s.jsx)("input",{type:b?"text":"password",name:"otp",placeholder:"•  •  •  •  •  •",value:l.otp,onChange:e=>{let t=e.target.value;/^\d{0,6}$/.test(t)&&d({...l,otp:t})},onFocus:()=>N(!0),onBlur:()=>N(!1),required:!0})})]}),(0,s.jsxs)("div",{className:"button-container",children:[!u&&(0,s.jsx)("button",{type:"submit",disabled:!v||g,children:g?"Sending...":"Send OTP"}),u&&(0,s.jsx)("button",{type:"submit",disabled:!S||g,children:g?"Verifying...":"Verify OTP"}),u&&f>0&&(0,s.jsxs)("p",{className:"otp-expiry-info",children:["Resend OTP in: ",(e=>{let t=Math.floor(e/60),a=e%60;return t>0?"".concat(t,"m:").concat(a,"s"):"".concat(a,"s")})(f)]})]}),u&&0===f&&(0,s.jsxs)("p",{className:"resend-otp",children:["Didn’t receive code?"," ",(0,s.jsx)("span",{className:"request-again",onClick:k,children:"Request again"})]})]})]})}},21441:function(e,t,a){"use strict";a.d(t,{Z:function(){return A}});var s=a(85893),i=a(67294),r=a(25675);a(5881);let o={logo:{src:"/_next/static/media/logo.9b7e2eed.png",height:34,width:173,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAMAAABSSm3fAAAAFVBMVEX/SyP/SyP/TCT/TCT/SyX/TCL/TCO6osRBAAAAB3RSTlN/mlQ7Sm6Qb3y0bwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABpJREFUeJxjYGBmYmJmYmBhYGBkYGBkY2UEAAELAB9wFUuZAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2},basket_icon:{src:"/_next/static/media/basket_icon.f06f575e.png",height:30,width:29,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAJ1BMVEVGUH9IVX5KVoBIVH1IVX1IVX5JVX1KV4FIVX9IVHxIVH5KVn9PXIm5btyJAAAAC3RSTlMF9992hZzBZR6vbdd9bSwAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA3SURBVHicHcKJDQAxCASxWSDkWfqv96SzDKw/7IJ6cC1bvljd3TLhyiwHayIzZrFHkmZzwrbjfCizAVIKl7lyAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},search_icon:{src:"/_next/static/media/search_icon.424a97b6.png",height:27,width:27,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAHlBMVEVMaXFIVX5IVH1IVH5JVH1ATXNHVX5LVn9IVHlKVHz2MxD+AAAACnRSTlMAkXifZwYcOCxQMCdu8gAAAAlwSFlzAAALEwAACxMBAJqcGAAAADFJREFUeJwtyskNACAMxMDZhKv/ihESP8s2o9MDI6iip0mWeFRb++blP6aSPlh7OX0BETMAiSLSWQkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},profile_icon:{src:"/_next/static/media/profile_icon.db7957ea.png",height:32,width:26,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAMAAAAC2hU0AAAAJFBMVEVKVn9MaXFIU31HVHxIVX1IU31VVapLVH5NWoZIVH1IVX5PXIiq/GICAAAAC3RSTlP9AFJpS6IDLfPNzBxrKLAAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAxSURBVHicFcGBEcAgDAOxd5wArfffl0NCHVJCnaTFUk1poW17C5MEc3gOEyCD6uMvXR7nAOplch9xAAAAAElFTkSuQmCC",blurWidth:7,blurHeight:8},logout_icon:{src:"/_next/static/media/logout_icon.a8075acd.png",height:32,width:32,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAGFBMVEX/aUj/Ykf/ZEj/Y0hMaXH/Y0j/Y0f/ZlUOB9AyAAAACHRSTlMHRYdRADRyDwMDiNQAAAAJcEhZcwAACxMAAAsTAQCanBgAAAArSURBVHicVYtLCgAgEIV8n+r+Nw6CWbQTVLqirBYcxRQ2RQ+OZH8wauLZLxdOAKW7NL72AAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},bag_icon:{src:"/_next/static/media/bag_icon.e86225ee.png",height:32,width:32,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAFVBMVEX/V0D/YkX/Y0f/Y0P/Ykb/Y0b/YUbcmzpEAAAAB3RSTlMCYlQZI4dv9IGuwgAAAAlwSFlzAAALEwAACxMBAJqcGAAAACtJREFUeJxth7ENADAMg0xs9/+Tq6hrWQBJgWg5yVlT6EievfEn8iJyAeoLDw4AbBWNXZMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}};var n=a(39332);a(88610);var c=a(99603),l=a(59417);a(61202);var d=e=>{let{setShowSearchPopup:t}=e,[a,d]=(0,i.useState)(!1),[A,h]=(0,i.useState)(""),[u,m]=(0,i.useState)(""),[g,p]=(0,i.useState)([]),[f,x]=(0,i.useState)([]),[j,y]=(0,i.useState)(!1),[b,N]=(0,i.useState)(""),[C,v]=(0,i.useState)([]),[S,w]=(0,i.useState)(0),k=(0,n.useRouter)(),[I,E]=(0,i.useState)(!0);(0,i.useEffect)(()=>{d(!0)},[]),(0,i.useEffect)(()=>{if(a){let e=JSON.parse(localStorage.getItem("cartItems"))||[];v(e),w(e.reduce((e,t)=>e+t.quantity,0)),(async()=>{if(!O())try{y(!0);let e=await fetch("/api/categories");if(e.ok){let t=await e.json();p(t)}else throw Error("Failed to fetch categories")}catch(e){N(e.message)}finally{y(!1)}})()}},[a]);let T=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{y(!0);let a=await fetch("/api/selectitem?category=".concat(e,"&searchText=").concat(t));if(a.ok){let e=await a.json();x(e)}else throw Error("Failed to fetch items")}catch(e){N(e.message)}finally{y(!1)}};(0,i.useEffect)(()=>{""===A.trim()||u?x([]):T("",A)},[A]);let V=e=>{h(""),m(e),T(e)},O=()=>{let e=localStorage.getItem("token");if(e)try{let a=jwt_decode(e);if(a&&1e3*a.exp<Date.now())return localStorage.removeItem("token"),t(!1),setShowLoginPopup(!0),!0}catch(e){console.error("Error decoding token:",e)}return!1},D=async e=>{let t;if(O())return;let a=C.findIndex(t=>t.foodId._id===e._id);if(a>-1){t=[...C],t[a].quantity+=1,v(t);try{let s=localStorage.getItem("token");if(!s)throw Error("No token found. Please log in first.");let i=await fetch("/api/cart/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:s,foodId:e._id,quantity:t[a].quantity})}),r=await i.json();i.ok&&r.success||console.error("Failed to update item quantity:",r.message)}catch(e){console.error("Error updating item quantity:",e)}}else{v(t=[...C,{foodId:e,quantity:1}]);try{let t=localStorage.getItem("token");if(!t)throw Error("No token found. Please log in first.");let a=await fetch("/api/cart/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,foodId:e._id,quantity:1,imageUrl:e.imageUrl,name:e.name,price:e.price})}),s=await a.json();a.ok&&s.success||console.error("Failed to add item to cart:",s.message)}catch(e){console.error("Error adding item to cart:",e)}}},P=async e=>{let t;if(O())return;let a=C.findIndex(t=>t.foodId._id===e._id);if(a>-1){let s={...C[a]};if(s.quantity>1){s.quantity-=1,(t=[...C])[a]=s,v(t);try{let t=localStorage.getItem("token");if(!t)throw Error("No token found. Please log in first.");let a=await fetch("/api/cart/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,foodId:e._id,quantity:s.quantity})}),i=await a.json();a.ok&&i.success||console.error("Failed to update item quantity:",i.message)}catch(e){console.error("Error updating item quantity:",e)}}else{v(t=C.filter(t=>t.foodId._id!==e._id));try{let t=localStorage.getItem("token");if(!t)throw Error("No token found. Please log in first.");let a=await fetch("/api/cart/remove",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,foodId:e._id})}),s=await a.json();a.ok&&s.success||console.error("Failed to remove item from cart:",s.message)}catch(e){console.error("Error removing item from cart:",e)}}}};return(0,i.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(!e){N("No token found. Please log in."),E(!1);return}try{let t=await fetch("/api/cart/get",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();t.ok?a.cartItems&&0===a.cartItems.length?(v([]),N("")):v(a.cartItems):N(a.message||"Failed to fetch cart data")}catch(e){console.error("Error fetching cart:",e),N("Error fetching cart data")}finally{E(!1)}})()},[]),(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/categories"),t=await e.json();e.ok?p(t.categories):N("Failed to load categories")}catch(e){console.error("Error fetching categories:",e),N("Error fetching categories")}})()},[]),(0,s.jsx)("div",{className:"search-popup-overlay",children:(0,s.jsxs)("div",{className:"search-popup",children:[(0,s.jsx)("div",{className:"search-popup-header",children:(0,s.jsx)("h2",{children:"Search Items"})}),(0,s.jsx)("div",{className:"search-popup-body",children:(0,s.jsxs)("div",{className:"search-input-container",children:[(A||u)&&(0,s.jsx)("div",{className:"arrow-icon-button",onClick:()=>{m(""),h(""),x([])},children:(0,s.jsx)(c.G,{icon:l.acZ,className:"arrow-icon"})}),(0,s.jsx)("input",{type:"text",className:"search-popup-input",placeholder:u?"".concat(u):"Search for items...",value:A,onChange:e=>h(e.target.value),disabled:!!u}),A||u?(0,s.jsx)("button",{className:"clear-category-button",onClick:()=>{h(""),m(""),x([])},children:"\xd7"}):(0,s.jsx)("button",{className:"search-icon-button",children:(0,s.jsx)(r,{src:o.search_icon,alt:"Search",className:"searchButton"})})]})}),(0,s.jsxs)("div",{className:"search-popup-categories",children:[(0,s.jsx)("div",{className:"categories-title2",children:!u&&!A&&(0,s.jsx)("div",{className:"categories-title1",children:"Popular Cuisines"})}),A||u?(0,s.jsx)("div",{className:"filtered-items",children:j?(0,s.jsx)("p",{className:"loading-item",children:"Loading items..."}):b?(0,s.jsx)("p",{className:"error",children:b}):f.length>0?(0,s.jsx)("div",{className:"items-list",children:f.map(e=>{var t;return(0,s.jsxs)("div",{className:"item-row",children:[(0,s.jsx)("div",{className:"item-image",children:(0,s.jsx)("img",{src:e.imageUrl,alt:e.name})}),(0,s.jsxs)("div",{className:"item-details",children:[(0,s.jsx)("p",{className:"item-name",children:e.name}),(0,s.jsx)("p",{className:"item-description",children:"Dish"})]}),(0,s.jsx)("div",{children:C.some(t=>t.foodId&&t.foodId._id===e._id)?(0,s.jsxs)("div",{className:"quantity-controls",children:[(0,s.jsx)("button",{className:"quantity-decrease",onClick:()=>P(e),children:"-"}),(0,s.jsx)("span",{className:"quantity",children:null===(t=C.find(t=>t.foodId._id===e._id))||void 0===t?void 0:t.quantity}),(0,s.jsx)("button",{className:"quantity-increase",onClick:()=>D(e),children:"+"})]}):(0,s.jsx)("button",{className:"add-to-cart",onClick:()=>D(e),children:"Add"})})]},e._id)})}):(0,s.jsxs)("p",{className:"empty",children:["No items found for ",u||A,"."]})}):(0,s.jsx)("div",{className:"categories-list1",children:j?(0,s.jsx)("p",{className:"loading-item",children:"Loading categories..."}):b?(0,s.jsx)("p",{className:"error",children:b}):g.length>0?(0,s.jsx)("div",{className:"categories-container",children:g.map((e,t)=>(0,s.jsxs)("div",{className:"category-item1 ".concat(t<g.length-3?"has-border":""),onClick:()=>V(e.name),children:[(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"img1"}),(0,s.jsx)("p",{children:e.name})]},e._id))}):(0,s.jsx)("p",{className:"empty",children:"No categories found."})})]}),(0,s.jsxs)("div",{className:"cart-close",children:[(0,s.jsx)("button",{className:"search-popup-close",onClick:()=>t(!1),children:"Close"}),C.length>0&&(0,s.jsxs)("button",{onClick:()=>{k&&(t(!1),k.push("/Cart"))},className:"go-to-cart-button",children:["Go to Cart (",C.reduce((e,t)=>e+t.quantity,0),")"]})]})]})})},A=e=>{let{isLoggedIn:t,setShowLogin:a,handleLogout:c}=e,[l,A]=(0,i.useState)(!1),h=(0,n.useRouter)(),u=(0,n.usePathname)(),[m,g]=(0,i.useState)(null),[p,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("token");e?g(e):t()},t=()=>{localStorage.removeItem("token"),g(null),a(!0),h.push("/")};e();let s=setInterval(e,5e3);return()=>clearInterval(s)},[h,a]);let x=async()=>{A(!0),setTimeout(async()=>{m?await h.push("/Cart"):a(!0),A(!1)},1500)};return(0,s.jsxs)("nav",{className:"navbar",children:[(0,s.jsx)("div",{className:"logo",children:(0,s.jsx)("a",{href:"/",children:(0,s.jsx)(r,{src:o.logo,alt:"Logo"})})}),(0,s.jsx)("div",{className:"navbar-menu",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/",className:"/"===u?"active":"",children:"Home"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/About-us",className:"/About-us"===u?"active":"",children:"About us"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"/",className:"/Blog"===u?"active":"",children:"Blog"})}),(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:"#footer",className:"/Contact-us"===u?"active":"",children:"Contact us"})})]})}),(0,s.jsx)("div",{className:"navbar-right basket",children:(0,s.jsx)(r,{onClick:()=>{"/"===u&&(m?f(!0):a(!0))},src:o.search_icon,alt:"Search",className:"searchButton ".concat("/"!==u?"disabled":""),style:"/"!==u?{cursor:"not-allowed"}:{}})}),(0,s.jsx)("div",{className:"navbar-search-icon",children:l?(0,s.jsx)("div",{className:"spinner"}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"basket",children:[(0,s.jsx)(r,{src:o.basket_icon,alt:"Cart",onClick:x,className:"basketIcon"}),(0,s.jsx)("div",{className:"dot"})]})})}),m?(0,s.jsxs)("div",{className:"navbar-profile",children:[(0,s.jsx)(r,{src:o.profile_icon,alt:"Profile"}),(0,s.jsxs)("ul",{className:"nav-profile-dropdown",children:[(0,s.jsxs)("li",{onClick:()=>{m?h.push("/MyOrder"):a(!0)},children:[(0,s.jsx)(r,{src:o.bag_icon,alt:"Order"}),(0,s.jsx)("p",{children:"Orders"})]}),(0,s.jsx)("hr",{}),(0,s.jsxs)("li",{onClick:c,children:[(0,s.jsx)(r,{src:o.logout_icon,alt:"Logout"}),(0,s.jsx)("p",{children:"Logout"})]})]})]}):(0,s.jsx)("button",{onClick:()=>a(!0),className:"signInButton",children:"Sign In"}),p&&(0,s.jsx)(d,{setShowSearchPopup:f})]})}}}]);