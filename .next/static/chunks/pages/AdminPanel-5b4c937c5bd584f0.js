(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{70297:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/AdminPanel",function(){return t(57761)}])},72422:function(){},69331:function(){},22784:function(){},75019:function(){},76215:function(){},44472:function(){},99706:function(){},3447:function(){},98934:function(){},45050:function(){},11676:function(){},65173:function(){},33201:function(){},45610:function(){},93194:function(){},8907:function(){},30514:function(){},79849:function(){},92379:function(){},44939:function(){},18469:function(){},57761:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return P}});var s=t(85893),i=t(67294);t(92379);var n=e=>{let{setSelectedComponent:a,selectedComponent:t}=e;return(0,s.jsx)("div",{className:"sidebar",children:(0,s.jsxs)("div",{className:"sidebar-options",children:[(0,s.jsxs)("div",{className:"sidebar-option ".concat("AddItems"===t?"active":""),onClick:()=>a("AddItems"),children:[(0,s.jsx)("img",{src:"/add_icon.png",alt:"Add Items"}),(0,s.jsx)("p",{children:"Add Items"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("AddCategory"===t?"active":""),onClick:()=>a("AddCategory"),children:[(0,s.jsx)("img",{src:"/add_icon.png",alt:"Add New Category"}),(0,s.jsx)("p",{children:"Add New Category"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("ListItems"===t?"active":""),onClick:()=>a("ListItems"),children:[(0,s.jsx)("img",{src:"/order_icon.png",alt:"List Items"}),(0,s.jsx)("p",{children:"Item List"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("Orders"===t?"active":""),onClick:()=>a("Orders"),children:[(0,s.jsx)("img",{src:"/order_icon.png",alt:"Orders Items"}),(0,s.jsx)("p",{children:"Item Orders"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("Payment"===t?"active":""),onClick:()=>a("Payment"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-credit-card",children:[(0,s.jsx)("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),(0,s.jsx)("line",{x1:"1",y1:"10",x2:"23",y2:"10"}),(0,s.jsx)("line",{x1:"16",y1:"14",x2:"16",y2:"14"})]}),(0,s.jsx)("p",{children:"Payment"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("Admin"===t?"active":""),onClick:()=>a("Admin"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-map-pin",children:[(0,s.jsx)("path",{d:"M21 10c0 5.25-9 13-9 13s-9-7.75-9-13a9 9 0 1 1 18 0z"}),(0,s.jsx)("circle",{cx:"12",cy:"10",r:"3"})]}),(0,s.jsx)("p",{children:"Admin Location"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("Gst"===t?"active":""),onClick:()=>a("Gst"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-percent",children:[(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"18",x2:"18",y2:"6"}),(0,s.jsx)("circle",{cx:"6",cy:"6",r:"3"}),(0,s.jsx)("circle",{cx:"18",cy:"18",r:"3"})]}),(0,s.jsx)("p",{children:"Tax"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("Coupon"===t?"active":""),onClick:()=>a("Coupon"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-tag",children:[(0,s.jsx)("path",{d:"M20.59 7.41 16 2.83 2.83 16 1 21l5-1.83L21.17 8.59a2 2 0 0 0 0-2.83z"}),(0,s.jsx)("path",{d:"M17 6a2 2 0 1 1-2-2 2 2 0 0 1 2 2z"})]}),(0,s.jsx)("p",{children:"Coupon"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("Couponlist"===t?"active":""),onClick:()=>a("Couponlist"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-list",children:[(0,s.jsx)("path",{d:"M4 6h16M4 12h16M4 18h16"}),(0,s.jsx)("path",{d:"M2 6h2v2H2zm0 6h2v2H2zm0 6h2v2H2z"})]}),(0,s.jsx)("p",{children:"Coupon List"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("deliveryFee"===t?"active":""),onClick:()=>a("deliveryFee"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-truck",children:[(0,s.jsx)("rect",{x:"1",y:"3",width:"15",height:"13",rx:"2",ry:"2"}),(0,s.jsx)("path",{d:"M16 8h4l3 5v3h-7V8z"}),(0,s.jsx)("circle",{cx:"5.5",cy:"18.5",r:"2.5"}),(0,s.jsx)("circle",{cx:"18.5",cy:"18.5",r:"2.5"})]}),(0,s.jsx)("p",{children:"Delivery Fee"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("printer"===t?"active":""),onClick:()=>a("printer"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-printer",children:[(0,s.jsx)("path",{d:"M6 9h12V5a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v4z"}),(0,s.jsx)("path",{d:"M6 18h12"}),(0,s.jsx)("path",{d:"M6 14h12v4H6z"}),(0,s.jsx)("path",{d:"M5 14h2v4H5z"}),(0,s.jsx)("path",{d:"M17 14h2v4h-2z"}),(0,s.jsx)("path",{d:"M7 19h10v2H7z"}),(0,s.jsx)("circle",{cx:"8.5",cy:"19.5",r:"1.5"}),(0,s.jsx)("circle",{cx:"15.5",cy:"19.5",r:"1.5"})]}),(0,s.jsx)("p",{children:"Print"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("headerimage"===t?"active":""),onClick:()=>a("headerimage"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-image",children:[(0,s.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,s.jsx)("path",{d:"M3 3l18 18"}),(0,s.jsx)("path",{d:"M9 9l-2 2 3 3 5-5 4 4"})]}),(0,s.jsx)("p",{children:"Header Image"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("addcaptain"===t?"active":""),onClick:()=>a("addcaptain"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-image",children:[(0,s.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,s.jsx)("path",{d:"M3 3l18 18"}),(0,s.jsx)("path",{d:"M9 9l-2 2 3 3 5-5 4 4"})]}),(0,s.jsx)("p",{children:"Add Captain"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("captain"===t?"active":""),onClick:()=>a("captain"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-image",children:[(0,s.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,s.jsx)("path",{d:"M3 3l18 18"}),(0,s.jsx)("path",{d:"M9 9l-2 2 3 3 5-5 4 4"})]}),(0,s.jsx)("p",{children:"Manage Captain"})]}),(0,s.jsxs)("div",{className:"sidebar-option ".concat("Settable"===t?"active":""),onClick:()=>a("Settable"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"none",stroke:"Settable"===t?"black":"#007BFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"feather feather-layout",children:[(0,s.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",fill:"none",stroke:"currentColor"}),(0,s.jsx)("path",{d:"M3 9h18M9 3v18M15 3v18"})]}),(0,s.jsx)("p",{children:"Manage Table"})]}),(0,s.jsx)("div",{className:"space-bottom"})]})})};t(22784);var l=t(44173);t(44440);var r=()=>{let[e,a]=(0,i.useState)(null),[t,n]=(0,i.useState)(null),[r,c]=(0,i.useState)({name:"",description:"",price:"",category:"",discount:"",vegOrNonVeg:"",gstRate:""}),[o,d]=(0,i.useState)([]),[h,p]=(0,i.useState)([]),[m,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>{x(),j()},[]),(0,i.useEffect)(()=>()=>{t&&URL.revokeObjectURL(t)},[t]);let x=async()=>{try{let e=await fetch("/api/getcategories");if(e.ok){let a=await e.json();d(a.categories)}else g("Failed to fetch categories")}catch(e){console.error("Error:",e),g("An error occurred while fetching categories")}},j=async()=>{try{let e=await fetch("/api/gst");if(e.ok){let a=await e.json();p(a)}else g("Failed to fetch GST list")}catch(e){console.error("Error:",e),g("An error occurred while fetching GST list")}},g=e=>{l.Am.error(e)},v=e=>{let a=e.target.name,t=e.target.value;c(e=>({...e,[a]:t}))},y=async t=>{if(t.preventDefault(),u(!0),!e||!r.name||!r.description||!r.price||!r.discount||!r.category||!r.vegOrNonVeg||!r.gstRate){g("Please fill all the required fields."),u(!1);return}let s=new FormData;s.append("name",r.name),s.append("description",r.description),s.append("price",r.price),s.append("discount",r.discount),s.append("category",r.category),s.append("gstRate",r.gstRate),s.append("vegOrNonVeg",r.vegOrNonVeg),s.append("image",e);try{let e=await fetch("/api/additem",{method:"POST",body:s});if(e.ok){let t=await e.json();console.log("Form submitted",t),a(null),n(null),c({name:"",description:"",price:"",discount:"",category:"",vegOrNonVeg:"",gstRate:""}),l.Am.success("Food Added")}else g("Failed to submit form")}catch(e){console.error("Error:",e),g("An error occurred while submitting the form")}finally{u(!1)}};return(0,s.jsxs)("div",{className:"add-item-section1",children:[(0,s.jsxs)("form",{className:"flex-col",onSubmit:y,children:[(0,s.jsxs)("div",{className:"add-img-upload flex-col",children:[(0,s.jsx)("p",{children:"Upload Image"}),(0,s.jsx)("label",{htmlFor:"image",className:"image-upload-label1",children:(0,s.jsx)("img",{src:t||"/upload_area.png",alt:"Upload Preview",className:"image-upload"})}),(0,s.jsx)("input",{onChange:e=>{let t=e.target.files[0];t&&(t.size>2097152?g("Image size should be less than 2MB"):["image/png","image/jpeg"].includes(t.type)?(a(t),n(URL.createObjectURL(t))):g("Only PNG or JPEG images are allowed"))},type:"file",id:"image",hidden:!0,required:!0})]}),(0,s.jsxs)("div",{className:"add-product-name flex-col",children:[(0,s.jsx)("p",{children:"Product Name"}),(0,s.jsx)("input",{onChange:v,name:"name",value:r.name,type:"text",placeholder:"Enter Name",required:!0})]}),(0,s.jsxs)("div",{className:"add-product-description flex-col",children:[(0,s.jsx)("p",{children:"Product Description"}),(0,s.jsx)("textarea",{onChange:v,name:"description",value:r.description,placeholder:"Enter Description",rows:4,required:!0})]}),(0,s.jsxs)("div",{className:"input-row2",children:[(0,s.jsxs)("div",{className:"add-price flex-col",children:[(0,s.jsx)("p",{children:"Product Category"}),(0,s.jsxs)("select",{onChange:v,name:"category",value:r.category,required:!0,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Choose categories"}),o.length>0?o.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name)):(0,s.jsx)("option",{value:"",disabled:!0,children:"No categories available"})]})]}),(0,s.jsxs)("div",{className:"add-product-name flex-col",children:[(0,s.jsx)("p",{children:"Food Type"}),(0,s.jsxs)("select",{name:"vegOrNonVeg",value:r.vegOrNonVeg,onChange:v,required:!0,children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Choose Food Type"}),(0,s.jsx)("option",{value:"Veg",children:"Veg"}),(0,s.jsx)("option",{value:"Non-Veg",children:"Non-Veg"})]})]}),(0,s.jsxs)("div",{className:"add-price flex-col",children:[(0,s.jsx)("p",{children:"Product Discount (%)"}),(0,s.jsx)("input",{onChange:v,name:"discount",value:r.discount,type:"number",placeholder:"Enter Discount"})]})]}),(0,s.jsxs)("div",{className:"input-row2",children:[(0,s.jsxs)("div",{className:"add-price flex-col",children:[(0,s.jsx)("p",{children:"Product Price"}),(0,s.jsx)("input",{onChange:v,name:"price",value:r.price,type:"number",placeholder:"₹200",required:!0})]}),(0,s.jsxs)("div",{className:"add-price flex-col",children:[(0,s.jsx)("p",{children:"GST Rate (%)"}),(0,s.jsxs)("select",{onChange:v,name:"gstRate",value:r.gstRate,children:[(0,s.jsx)("option",{value:"",children:"Choose GST Rate"}),h.length>0?h.map(e=>(0,s.jsxs)("option",{value:e.gstRate,children:[e.gstName," - ",e.gstRate,"%"]},e._id)):(0,s.jsx)("option",{value:"",disabled:!0,children:"No GST rates available"})]})]})]}),(0,s.jsx)("button",{className:"add-item-btn1",type:"submit",disabled:m,children:m?"Adding...":"Add Item"})]}),(0,s.jsx)(l.Ix,{})]})};t(93194),t(65173);var c=t(99603),o=t(59417),d=e=>{let{item:a,onClose:t,onUpdate:n}=e,[r,d]=(0,i.useState)(a.name),[h,p]=(0,i.useState)(a.category),[m,u]=(0,i.useState)(a.price||""),[x,j]=(0,i.useState)(a.discount||""),[g,v]=(0,i.useState)(a.description||""),[y,N]=(0,i.useState)(null),[b,f]=(0,i.useState)(a.gstRate||""),[C,w]=(0,i.useState)([]),[S,k]=(0,i.useState)([]),[E,A]=(0,i.useState)(a.vegOrNonVeg||"Veg"),[F,T]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/gst"),a=await e.json();k(a)}catch(e){l.Am.error("Failed to fetch GST rates")}};(async()=>{try{let e=await fetch("/api/categories"),a=await e.json();w(a)}catch(e){l.Am.error("Failed to fetch categories")}})(),e()},[]);let P=async()=>{if(!r||!h||!m||!b){l.Am.error("Please fill in all required fields.");return}if(m<0){l.Am.error("Price cannot be negative.");return}T(!0);let e=new FormData;e.append("id",a._id),e.append("name",r),e.append("category",h),e.append("price",m),e.append("description",g),e.append("discount",x),e.append("gstRate",b),e.append("vegOrNonVeg",E),y&&e.append("image",y);try{let s=await fetch("/api/updateitem",{method:"PUT",body:e});if(s.ok){let e={...a,name:r,category:h,price:m,description:g,discount:x,gstRate:b,vegOrNonVeg:E,imageUrl:y?URL.createObjectURL(y):a.imageUrl};n(e),l.Am.success("Item updated successfully"),t()}else{let e=await s.json();l.Am.error("Failed to update item: ".concat(e.message||"Unknown error"))}}catch(e){l.Am.error("An error occurred while updating the item")}finally{T(!1)}};return(0,s.jsxs)("div",{className:"popup2",role:"dialog","aria-labelledby":"edit-popup-title","aria-modal":"true",children:[(0,s.jsx)(l.Ix,{}),(0,s.jsxs)("div",{className:"popup-content2",children:[(0,s.jsxs)("div",{className:"popup-header2",children:[(0,s.jsx)("h2",{id:"edit-popup-title",children:"Edit Item"}),(0,s.jsx)(c.G,{icon:o.NBC,className:"close-icon",onClick:t,"aria-label":"Close"})]}),(0,s.jsx)("div",{className:"text-form3",children:"Upload Image"}),(0,s.jsx)("label",{htmlFor:"image-upload",className:"image-upload-label2",children:(0,s.jsx)("img",{src:y?URL.createObjectURL(y):"/upload_area.png",alt:"Upload Preview"})}),(0,s.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",onChange:e=>{N(e.target.files[0])},style:{display:"none"}}),(0,s.jsxs)("div",{className:"input-row2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-form3",children:" Name"}),(0,s.jsx)("input",{onChange:e=>d(e.target.value),name:"name",value:r,type:"text",placeholder:"Enter Name",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-form3",children:" Discount (%)"}),(0,s.jsx)("input",{type:"number",value:x,onChange:e=>j(parseFloat(e.target.value)||""),placeholder:"Discount (%)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-form3",children:"Type"}),(0,s.jsxs)("select",{value:E,onChange:e=>A(e.target.value),children:[(0,s.jsx)("option",{value:"Veg",children:"Veg"}),(0,s.jsx)("option",{value:"Non-Veg",children:"Non-Veg"})]})]})]}),(0,s.jsxs)("div",{className:"input-row2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-form3",children:" Category"}),(0,s.jsx)("select",{value:h,onChange:e=>p(e.target.value),children:C.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e._id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-form3",children:" Price"}),(0,s.jsx)("input",{type:"number",value:m,onChange:e=>u(parseFloat(e.target.value)||""),placeholder:"Price",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-form3",children:"GST Rate (%)"}),(0,s.jsx)("select",{onChange:e=>f(e.target.value),value:b,required:!0,children:S.length>0?S.map(e=>(0,s.jsxs)("option",{value:e.gstRate,children:[e.gstName," - ",e.gstRate,"%"]},e._id)):(0,s.jsx)("option",{value:"",disabled:!0,children:"No GST rates available"})})]})]}),(0,s.jsx)("div",{className:"text-form3",children:"Product Description"}),(0,s.jsx)("textarea",{onChange:e=>v(e.target.value),value:g,placeholder:"Enter Description",rows:"4"}),(0,s.jsx)("div",{className:"updatebutton",children:(0,s.jsx)("button",{onClick:P,disabled:F,children:F?"Updating...":"Update Item"})})]})]})};function h(){let[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)(null),[r,c]=(0,i.useState)(!1),[o,h]=(0,i.useState)(!0),[p,m]=(0,i.useState)(null);(0,i.useEffect)(()=>{!async function(){try{let e=await fetch("/api/data");if(!e.ok)throw Error("Failed to fetch data");let t=await e.json();a(t)}catch(e){m(e.message)}finally{h(!1)}}()},[]);let u=async e=>{try{if(!(await fetch("/api/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete item");a(a=>a.filter(a=>a._id!==e)),l.Am.success("Food Removed")}catch(e){l.Am.error(e.message)}},x=e=>{n(e),c(!0)};return(0,s.jsxs)("div",{className:"list add1 flex-col",children:[(0,s.jsx)(l.Ix,{}),(0,s.jsx)("div",{className:"list-item-title",children:(0,s.jsx)("p",{children:"All Food List"})}),o?(0,s.jsx)("p",{className:"loading",children:"Loading..."}):p?(0,s.jsx)("p",{children:p}):(0,s.jsxs)("div",{className:"list-table",children:[(0,s.jsxs)("div",{className:"list-table-format1 title",children:[(0,s.jsx)("b",{children:"Image"}),(0,s.jsx)("b",{children:"Name"}),(0,s.jsx)("b",{children:"Category"}),(0,s.jsx)("b",{children:"Price"}),(0,s.jsx)("b",{children:"Discount (%)"}),(0,s.jsx)("b",{children:"GST (%)"})," ",(0,s.jsx)("b",{children:"Edit"}),(0,s.jsx)("b",{children:"Action"})]}),e.map(e=>(0,s.jsxs)("div",{className:"list-table-format1",children:[(0,s.jsxs)("span",{children:[" ",(0,s.jsx)("img",{src:e.imageUrl,alt:e.name,className:"image"})]}),(0,s.jsx)("h2",{className:"name",children:e.name}),(0,s.jsx)("p",{className:"category",children:e.category}),(0,s.jsxs)("p",{className:"price",children:["₹",e.price.toFixed(2)]}),(0,s.jsx)("p",{className:"discount",children:e.discount?"".concat(e.discount,"%"):"N/A"}),(0,s.jsx)("p",{className:"discount",children:e.gstRate?"".concat(e.gstRate,"%"):"N/A"})," ",(0,s.jsx)("p",{className:"action-edit",children:(0,s.jsx)("button",{className:"edit-button-list",onClick:()=>x(e),children:"Edit"})}),(0,s.jsx)("p",{className:"cursor",onClick:()=>u(e._id),children:(0,s.jsx)("img",{src:"/bin.png",alt:"Delete",className:"icon-delet"})})]},e._id))]}),r&&(0,s.jsx)(d,{item:t,onClose:()=>{c(!1)},onUpdate:e=>{a(a=>a.map(a=>a._id===e._id?e:a))}})]})}var p=t(91819);t(61120),t(30514),t(72422);var m=()=>{let[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)(null),[l,r]=(0,i.useState)(!0),d=async()=>{try{let e=await fetch("/api/ordersList",{method:"GET",headers:{"Content-Type":"application/json"}}),t=await e.json();a(t.orders)}catch(e){console.error("Error fetching orders:",e),n("Error fetching orders.")}finally{r(!1)}};(0,i.useEffect)(()=>{d()},[]);let h=async(e,t)=>{try{let s=await fetch("/api/changeOrderStatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e,status:t})}),i=await s.json();i.success?a(a=>a.map(a=>a._id===e?{...a,status:t}:a)):console.error("Failed to update order status:",i.message)}catch(e){console.error("Error updating order status:",e)}},m=e=>{let a=new p.ZP;a.setFontSize(16),a.addImage("/parcel_icon.png","PNG",10,10,20,20),a.setFont("helvetica","bold"),a.text("Restaurant Name",120,15);let t=a.splitTextToSize("Address: 78, tonk road, G250, RIICO Industrial Area,Mansarovar, Jaipur, Rajasthan 302020, India",120);a.setFontSize(12),a.setFont("helvetica","normal"),a.text(t,120,21),a.text("GST No: 1234567890",120,36),a.setFontSize(14),a.setFont("helvetica","bold"),a.text("Invoice",10,50),a.setFontSize(12),a.setFont("helvetica","normal");let s="".concat(e.selectedAddress.flatNo,", ").concat(e.selectedAddress.landmark,", ").concat(e.selectedAddress.location),i=a.splitTextToSize(s,67),n=56;i.forEach(e=>{a.text(e,10,n),n+=6}),n+=Math.max(12-6*i.length,0),a.text("".concat(e.user.mobileNumber),10,n);let l=new Date().toLocaleString();a.text("Invoice Date: ".concat(l),120,62),a.text("Order Date: ".concat(new Date(e.date).toLocaleString()),120,56),a.text("Payment Status: ".concat(e.paymentStatus),120,68);let r=100;a.setFont("helvetica","bold"),a.setFillColor(200,200,200),a.rect(10,r-5,190,10,"F"),a.text("S.No",15,r),a.text("Item Name",43,r),a.text("Quantity",85,r),a.text("Price",138,r),a.text("Total",174,r),a.line(30,r-5,30,r+5),a.line(80,r-5,80,r+5),a.line(120,r-5,120,r+5),a.line(160,r-5,160,r+5),a.line(10,r-5,200,r-5),a.line(10,r+5,200,r+5),a.line(10,r-5,10,r+5),a.line(200,r-5,200,r+5),a.setFont("helvetica","normal"),r+=10,e.items.forEach((e,t)=>{a.rect(10,r-5,190,10),a.text("".concat(t+1),17,r),a.text(e.foodId?e.foodId.name:"Unknown",43,r),a.text("".concat(e.quantity),90,r),a.text("".concat(e.price),136,r);let s=e.price*e.quantity;a.text("".concat(s.toFixed(2)),170,r),a.line(30,r-5,30,r+5),a.line(80,r-5,80,r+5),a.line(120,r-5,120,r+5),a.line(160,r-5,160,r+5),r+=10}),a.text("SUBTOTAL:",122,r),a.text("".concat(e.subtotal.toFixed(2)),170,r),a.line(120,r+2,200,r+2),a.line(120,r-5,120,r+2),a.line(200,r-5,200,r+2),r+=7,e.itemDiscount>0&&(a.text("ITEM DISCOUNT:",122,r),a.text("- ".concat(e.itemDiscount.toFixed(2)),168,r),a.line(120,r+2,200,r+2),a.line(120,r-5,120,r+2),a.line(200,r-5,200,r+2),r+=7),e.couponDiscount>0&&(a.text("COUPON DISCOUNT:",122,r),a.text("- ".concat(e.couponDiscount.toFixed(2)),168,r),a.line(120,r+2,200,r+2),a.line(120,r-5,120,r+2),a.line(200,r-5,200,r+2),r+=7),a.text("TOTAL GST:",122,r),a.text("+ ".concat(e.totalGst.toFixed(2)),168,r),a.line(120,r+2,200,r+2),a.line(120,r-5,120,r+2),a.line(200,r-5,200,r+2),r+=7,e.deliveryFee>0&&(a.text("DELIVERY FEE:",122,r),a.text("+ ".concat(e.deliveryFee.toFixed(2)),168,r),a.line(120,r+2,200,r+2),a.line(120,r-5,120,r+2),a.line(200,r-5,200,r+2),r+=7),a.setFont("helvetica","bold"),a.text("TOTAL PRICE :",122,r),a.text("".concat(e.totalAmount.toFixed(2)),170,r),a.line(120,r+2,200,r+2),a.line(120,r-5,120,r+2),a.line(200,r-5,200,r+2),r+=20,a.setFontSize(10),a.setFont("helvetica","italic"),a.text("----------------------------------------------------------------------------------------------",50,r),r+=10,a.text("Thank you for your order!",105,r,{align:"center"}),r+=10,a.text("For any issues, contact support at [email].",105,r,{align:"center"}),r+=10,a.text("Invoice generated automatically. Please keep this invoice for reference.",105,r,{align:"center"}),a.output("dataurlnewwindow")};return(0,s.jsxs)("div",{className:"order-admin",children:[(0,s.jsxs)("div",{className:"order-header",children:[(0,s.jsx)("h1",{children:"Order Page"}),(0,s.jsx)("p",{className:"refresh",children:(0,s.jsx)(c.G,{icon:o.d8e,className:"refresh-icon",onClick:()=>{r(!0),d()},style:{cursor:"pointer"}})})]}),l?(0,s.jsx)("p",{className:"loading",children:"Loading..."}):t?(0,s.jsx)("p",{className:"error",children:t}):(0,s.jsx)("div",{className:"order-list-admin",children:e&&Array.isArray(e)&&e.slice().reverse().map(e=>(0,s.jsxs)("div",{className:"order-item",children:[(0,s.jsx)("div",{className:"order-item-header",children:(0,s.jsx)("img",{src:"/parcel_icon.png",alt:"parcel icon",className:"order-item-icon"})}),(0,s.jsxs)("div",{className:"order-item-details",children:[(0,s.jsx)("p",{className:"order-item-food",children:e.items.map(e=>e.foodId?"".concat(e.foodId.name," x ").concat(e.quantity):"Unknown Food x ".concat(e.quantity)).join(", ")}),(0,s.jsxs)("div",{className:"order-item-address",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)(c.G,{icon:o.opg,className:"mobile-icon"}),e.selectedAddress.flatNo,", ",e.selectedAddress.landmark]}),(0,s.jsx)("p",{children:e.selectedAddress.location})]}),(0,s.jsxs)("p",{className:"mobile-number",children:[(0,s.jsx)(c.G,{icon:o.j1w,className:"mobile-icon"}),e.user.mobileNumber]}),(0,s.jsxs)("p",{className:"order-item-date",children:[(0,s.jsx)(c.G,{icon:o.fT7,className:"mobile-icon"}),new Date(e.date).toLocaleString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})]})]}),(0,s.jsxs)("p",{className:"order-item-total-items",children:["Items: ",e.items.length]}),(0,s.jsxs)("p",{className:"order-item-total-amount",children:[(0,s.jsx)("span",{className:"mobile-icon1",children:"₹"}),e.totalAmount]}),(0,s.jsxs)("p",{children:[(0,s.jsxs)("select",{value:e.status,onChange:a=>h(e._id,a.target.value),children:[(0,s.jsx)("option",{value:"Order Processing",children:"Order Processing"}),(0,s.jsx)("option",{value:"Accepted",children:"Accepted"}),(0,s.jsx)("option",{value:"Food Preparing",children:"Food Preparing"}),(0,s.jsx)("option",{value:"Out for delivery",children:"Out for delivery"}),(0,s.jsx)("option",{value:"Delivered",children:"Delivered"}),(0,s.jsx)("option",{value:"Cancelled",children:"Cancelled"})]}),(0,s.jsxs)("div",{className:"order-item-name",children:[(0,s.jsxs)("p",{className:"order-item-date",children:["Status: ",e.status]}),(0,s.jsxs)("p",{className:"order-item-date",children:["Payment Status: ",e.paymentStatus]}),"Cash on Delivery"!==e.paymentStatus&&(0,s.jsxs)("p",{className:"order-item-total-items",children:["UTR: ",e.UTR]})]}),(0,s.jsx)("p",{children:(0,s.jsx)("div",{className:"invoice-container",children:(0,s.jsxs)("button",{className:"pdf-button",onClick:()=>m(e),children:[(0,s.jsx)(c.G,{icon:o.gSj}),"PDF Invoice"]})})})]})]},e._id))})]})};t(44939),t(69331),t(3447);var u=e=>{let{show:a,category:t,onClose:n,fetchCategories:l}=e,[r,c]=(0,i.useState)({name:(null==t?void 0:t.name)||"",image:null}),[o,d]=(0,i.useState)(!1);(0,i.useEffect)(()=>{t&&c({name:(null==t?void 0:t.name)||"",image:null})},[t]);let h=async()=>{if(!r.name){alert("Category name is required.");return}d(!0);let e=new FormData;e.append("name",r.name),r.image&&e.append("image",r.image);try{let a=await fetch("/api/updatecategory/".concat(t._id),{method:"PUT",body:e});if(a.ok)await a.json(),alert("Category updated successfully!"),n(),l();else{let e=await a.json();alert("Update failed: ".concat(e.message))}}catch(e){console.error("Error updating category:",e),alert("An error occurred while updating the category.")}finally{d(!1)}};return a?(0,s.jsx)("div",{className:"popup-overlay-category ",children:(0,s.jsxs)("div",{className:"popup-container-category ",children:[(0,s.jsx)("label",{htmlFor:"image-upload",className:"image-upload-label2",children:(0,s.jsx)("img",{src:r.image?URL.createObjectURL(r.image):t.imageUrl||"/upload_area.png",alt:"Upload Preview",className:"category-image-preview"})}),(0,s.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",onChange:e=>{let a=e.target.files[0];a&&c(e=>({...e,image:a}))},style:{display:"none"}}),(0,s.jsx)("label",{htmlFor:"category-name",className:"popup-input-label",children:"Category Name"}),(0,s.jsx)("input",{id:"category-name",type:"text",className:"popup-input",value:r.name,onChange:e=>c(a=>({...a,name:e.target.value})),placeholder:"Enter category name"}),(0,s.jsxs)("div",{className:"popup-buttons",children:[(0,s.jsx)("button",{className:"popup-close-btn",onClick:n,children:"Close"}),(0,s.jsxs)("button",{className:"popup-update-btn",onClick:h,disabled:o,children:[o?"Updating...":"Update","  "]})]})]})}):null},x=()=>{let[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)({name:"",image:null}),[r,c]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null),[m,x]=(0,i.useState)(null),[j,g]=(0,i.useState)(!1),v=async()=>{c(!0);try{let e=await fetch("/api/getcategories");if(e.ok){let t=await e.json();a(t.categories)}else throw Error("Failed to fetch categories")}catch(e){console.error("Error:",e),p(e.message),l.Am.error("An error occurred while fetching categories")}finally{c(!1)}};(0,i.useEffect)(()=>{v()},[]);let y=async()=>{if(!t.name||!t.image){l.Am.error("Please provide a category name and image.");return}d(!0);let e=new FormData;e.append("name",t.name),e.append("image",t.image);try{let t=await fetch("/api/addcategory",{method:"POST",body:e});if(t.ok){let e=await t.json();a(a=>[...a,e.category]),n({name:"",image:null}),l.Am.success("Category added successfully")}else throw Error("Failed to add category")}catch(e){console.error("Error:",e),l.Am.error("An error occurred while adding the category")}finally{d(!1)}},N=async t=>{try{if((await fetch("/api/deletecategory/".concat(t),{method:"DELETE"})).ok)a(e.filter(e=>e.name!==t)),l.Am.success("Category deleted successfully");else throw Error("Failed to delete category")}catch(e){console.error("Error:",e),l.Am.error("An error occurred while deleting the category")}},b=e=>{x(e),g(!0)};return(0,s.jsxs)("div",{className:"category1",children:[(0,s.jsxs)("div",{className:"add-category",children:[(0,s.jsx)("h3",{children:"Add New Category"}),(0,s.jsxs)("div",{className:"flex-row1",children:[(0,s.jsx)("img",{src:t.image?URL.createObjectURL(t.image):"/upload_area.png",alt:"Upload Preview",onClick:()=>{document.getElementById("category-file-input").click()},style:{cursor:"pointer"}}),(0,s.jsx)("input",{id:"category-file-input",type:"file",accept:"image/png, image/jpeg, image/jpg",onChange:e=>{let a=e.target.files[0];a&&n(e=>({...e,image:a}))},style:{display:"none"}}),(0,s.jsx)("p",{children:(0,s.jsx)("input",{type:"text",placeholder:"Category Name",value:t.name,onChange:e=>n(a=>({...a,name:e.target.value}))})})]}),(0,s.jsx)("button",{className:"add-item-btn1",onClick:y,disabled:o,children:o?"Adding...":"Add Category"})]}),(0,s.jsxs)("div",{className:"category-list",children:[(0,s.jsx)("h3",{children:"Category List"}),r?(0,s.jsx)("p",{className:"loading",children:"Loading categories..."}):h?(0,s.jsx)("p",{children:h}):(0,s.jsx)("ul",{children:(0,s.jsxs)("div",{className:"list-table",children:[(0,s.jsxs)("div",{className:"list-table-format title",children:[(0,s.jsx)("b",{children:"Image"}),(0,s.jsx)("b",{children:"Category"}),(0,s.jsx)("b",{children:"Action"}),(0,s.jsx)("b",{children:"Action"})]}),(0,s.jsx)("div",{className:"table-category",children:e.length>0?e.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{children:(0,s.jsx)("img",{src:e.imageUrl||"/default_image.png",alt:e.name,className:"category-image"})}),(0,s.jsx)("span",{children:e.name}),(0,s.jsx)("span",{children:(0,s.jsx)("button",{className:"edit-category",onClick:()=>b(e),children:"Edit"})}),(0,s.jsx)("span",{children:(0,s.jsx)("img",{src:"/bin.png",alt:"Delete",className:"delete-icon",onClick:()=>N(e.name)})})]},e._id)):(0,s.jsx)("li",{children:"No categories available"})})]})})]}),(0,s.jsx)(u,{show:j,category:m,onClose:()=>g(!1),fetchCategories:v}),(0,s.jsx)(l.Ix,{})]})},j=t(87066);t(79849);var g=()=>{let[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)(null),[l,r]=(0,i.useState)(null),[c,o]=(0,i.useState)(""),[d,h]=(0,i.useState)(""),[p,m]=(0,i.useState)(!1),[u,x]=(0,i.useState)(!1),[g,v]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{x(!0);try{let{data:e}=await j.Z.get("/api/payment");a(e)}catch(e){v("Failed to fetch payments")}finally{x(!1)}})()},[]);let y=async()=>{if(l&&c&&d){m(!0);let t=new FormData;t.append("name",c),t.append("title",d),t.append("image",l);try{let{data:s}=await j.Z.post("/api/payment",t,{headers:{"Content-Type":"multipart/form-data"}});a([...e,s.Payment]),n(null),r(null),o(""),h("")}catch(e){v("Failed to add payment")}finally{m(!1)}}else v("All fields and an image are required")},N=async(t,s)=>{m(!0);try{let{data:i}=await j.Z.put("/api/update-payment?id=".concat(t),{status:"Active"===s?"Deactive":"Active"});a(e.map(e=>e._id===t?i:e))}catch(e){v("Failed to update status")}finally{m(!1)}},b=async t=>{m(!0);try{await j.Z.delete("/api/delete-payment?id=".concat(t)),a(e.filter(e=>e._id!==t))}catch(e){v("Failed to delete payment")}finally{m(!1)}};return(0,s.jsxs)("div",{className:"payment-container",children:[(0,s.jsxs)("div",{className:"add-category1",children:[(0,s.jsx)("h3",{children:"Add New Payment"}),(0,s.jsxs)("div",{className:"flex-row",children:[(0,s.jsx)("label",{htmlFor:"file-upload",className:"custom-file-upload",children:(0,s.jsx)("img",{src:t||"/upload_area.png",alt:"Upload Preview",className:"image-upload"})}),(0,s.jsx)("input",{id:"file-upload",type:"file",accept:"image/*",onChange:e=>{if(e.target.files[0]){let a=e.target.files[0];n(URL.createObjectURL(a)),r(a)}}}),(0,s.jsx)("input",{type:"text11",placeholder:"Enter title",value:d,onChange:e=>h(e.target.value)}),(0,s.jsx)("input",{type:"text11",placeholder:"Enter name",value:c,onChange:e=>o(e.target.value)})]}),(0,s.jsxs)("div",{className:"add-btn-button",children:[(0,s.jsx)("button",{className:"add-item-btn",onClick:y,disabled:p,children:p?"Adding...":"Add Payment"}),g&&(0,s.jsx)("p",{className:"error",children:g})]})]}),(0,s.jsxs)("div",{className:"payment-list",children:[(0,s.jsx)("h3",{children:"Payment List"}),u?(0,s.jsx)("p",{className:"loading",children:"Loading payments..."}):e.length>0?(0,s.jsxs)("ul",{className:"list-table",children:[(0,s.jsxs)("li",{className:"list-table-header",children:[(0,s.jsx)("b",{children:"Image"}),(0,s.jsx)("b",{children:"Name"}),(0,s.jsx)("b",{children:"Title"}),(0,s.jsx)("b",{children:"Status"}),(0,s.jsx)("b",{children:"Actions"})]}),e.map(e=>(0,s.jsxs)("li",{className:"payment-item ".concat(e.status),children:[(0,s.jsx)("b",{children:(0,s.jsx)("img",{className:"img-scen",src:e.imageUrl,alt:"Payment"})}),(0,s.jsx)("b",{children:e.name}),(0,s.jsx)("b",{children:e.title}),(0,s.jsx)("b",{children:(0,s.jsxs)("label",{className:"switch",children:[(0,s.jsx)("input",{type:"checkbox",checked:"Active"===e.status,onChange:()=>N(e._id,e.status)}),(0,s.jsx)("span",{className:"slider"})]})}),(0,s.jsx)("span",{children:(0,s.jsx)("img",{src:"/bin.png",alt:"Delete",className:"delete-icon",onClick:()=>b(e._id)})})]},e._id))]}):(0,s.jsx)("p",{children:"No payments found."})]})]})};t(75019);var v=()=>{let[e,a]=(0,i.useState)(""),[t,n]=(0,i.useState)(12),[r,c]=(0,i.useState)(!1),[o,d]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{c(!0);try{let e=await j.Z.get("/api/adminSettings");e.data.success?(a(e.data.adminLocation||""),n(e.data.distanceThreshold||12)):(console.error("Failed to fetch admin settings"),alert("Failed to fetch admin settings. Please try again later."))}catch(e){console.error("Error fetching admin settings:",e),alert("An error occurred while fetching admin settings.")}c(!1)})()},[]);let h=async()=>{if(!e||t<=0){alert("Please provide valid admin location and distance threshold.");return}d(!0);try{(await j.Z.post("/api/updateAdminSettings",{adminLocation:e,distanceThreshold:t})).data.success?l.Am.success("Address saved successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):l.Am.error("Error updating settings")}catch(e){console.error("Error updating settings:",e),l.Am.error("An unexpected error occurred")}d(!1)};return(0,s.jsxs)("div",{className:"order-admin",children:[(0,s.jsx)("h1",{children:"Admin Address"}),r?(0,s.jsx)("p",{className:"loading",children:"Loading settings..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{children:["Admin Location:",(0,s.jsx)("input",{type:"text",value:e,placeholder:"Enter admin address",onChange:e=>a(e.target.value)})]}),(0,s.jsxs)("label",{children:["Distance Threshold (km):",(0,s.jsx)("input",{type:"number",placeholder:"Distance Threshold (km)",value:t,onChange:e=>n(e.target.value)})]}),(0,s.jsx)("button",{onClick:h,disabled:o,children:o?"Saving...":"Save Address"})]}),(0,s.jsx)(l.Ix,{})]})};t(33201);var y=()=>{let[e,a]=(0,i.useState)(""),[t,n]=(0,i.useState)(""),[l,r]=(0,i.useState)([]),[c,o]=(0,i.useState)(!0);(0,i.useEffect)(()=>{d()},[]);let d=async()=>{try{let e=await fetch("/api/gst"),a=await e.json();r(a)}catch(e){console.error("Error fetching GST list:",e)}finally{o(!1)}},h=async s=>{s.preventDefault();try{let s=await fetch("/api/gst/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({gstName:e,gstRate:t})}),i=await s.json();r([...l,i]),a(""),n("")}catch(e){console.error("Error adding GST:",e)}},p=async e=>{try{let a=await fetch("/api/gst/delete/".concat(e),{method:"DELETE"});if(a.ok)r(l.filter(a=>a._id!==e));else{let e=await a.text();console.error("Error deleting GST item:",e)}}catch(e){console.error("Error deleting GST item:",e)}};return(0,s.jsxs)("div",{className:"gst-container",children:[(0,s.jsx)("h2",{children:"GST"}),(0,s.jsxs)("form",{onSubmit:h,children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"gst-name",children:"GST Name"}),(0,s.jsx)("input",{type:"text",id:"gst-name",value:e,onChange:e=>a(e.target.value.toUpperCase()),placeholder:"Enter GST name",required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"gst-rate",children:"GST Rate (%)"}),(0,s.jsx)("input",{type:"number",id:"gst-rate",value:t,onChange:e=>n(e.target.value),placeholder:"Enter GST rate",required:!0})]}),(0,s.jsx)("button",{type:"submit",children:"Save"})]}),(0,s.jsxs)("div",{className:"gst-list",children:[(0,s.jsx)("h3",{children:"GST List"}),c?(0,s.jsx)("p",{className:"loading",children:"Loading..."}):(0,s.jsx)("ul",{children:l.map(e=>(0,s.jsxs)("li",{children:[e.gstName," - ",e.gstRate,"%",(0,s.jsx)("p",{className:"delete1",children:(0,s.jsx)("img",{src:"/bin.png",alt:"Delete",className:"delete-image",onClick:()=>p(e._id)})}),"    "]},e._id))})]})]})};t(98934);var N=()=>{let[e,a]=(0,i.useState)(""),[t,n]=(0,i.useState)(0),[l,r]=(0,i.useState)(0),[c,o]=(0,i.useState)(""),[d,h]=(0,i.useState)(""),[p,m]=(0,i.useState)(0),[u,x]=(0,i.useState)(0),[j,g]=(0,i.useState)(!1),[v,y]=(0,i.useState)(null),[N,b]=(0,i.useState)({}),f=()=>{let a={};return e||(a.couponCode="Coupon Code is required"),(!t||t<=0)&&(a.couponRate="Coupon Rate must be greater than 0"),(!l||l<=0)&&(a.maxDiscountPrice="Maximum Discount Price must be greater than 0"),d||(a.expiry="Expiry Date & Time is required"),(!p||p<=0)&&(a.usageLimit="Usage Limit must be greater than 0"),(!u||u<=0)&&(a.cartPrice="Minimum Cart Price must be greater than 0"),c||(a.terms="Terms & Conditions are required"),b(a),0===Object.keys(a).length},C=async a=>{if(a.preventDefault(),!f())return;let s=await fetch("/api/coupons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:e,rate:t,maxDiscount:l,terms:c,expiry:d,usageLimit:p,cartPrice:u})});s.ok?(y(await s.json()),w()):alert("Failed to create coupon.")},w=()=>{a(""),n(0),r(0),o(""),h(""),m(0),x(0),g(!1),b({})};return(0,s.jsxs)("div",{className:"couponForm",children:[(0,s.jsx)("h2",{children:"Create New Coupon"}),(0,s.jsxs)("form",{onSubmit:C,children:[(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("div",{className:"inputGroup",children:[(0,s.jsx)("label",{htmlFor:"couponCode",children:"Coupon Code"}),(0,s.jsx)("input",{type:"text",id:"couponCode",value:e,onChange:e=>a(e.target.value.toUpperCase()),placeholder:"Enter coupon code"}),N.couponCode&&(0,s.jsx)("p",{className:"error",children:N.couponCode})]}),(0,s.jsxs)("div",{className:"inputGroup",children:[(0,s.jsx)("label",{htmlFor:"couponRate",children:"Coupon Rate (%)"}),(0,s.jsx)("input",{type:"number",id:"couponRate",value:t,onClick:()=>n(""),onChange:e=>n(e.target.value),placeholder:"Enter discount rate in ₹"}),N.couponRate&&(0,s.jsx)("p",{className:"error",children:N.couponRate})]}),(0,s.jsxs)("div",{className:"inputGroup",children:[(0,s.jsx)("label",{htmlFor:"maxDiscountPrice",children:"Maximum Discount Price (₹)"})," ",(0,s.jsx)("input",{type:"number",id:"maxDiscountPrice",value:l,onClick:()=>r(""),onChange:e=>r(e.target.value),placeholder:"Enter maximum discount price"}),N.maxDiscountPrice&&(0,s.jsx)("p",{className:"error",children:N.maxDiscountPrice})," "]})]}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("div",{className:"inputGroup",children:[(0,s.jsx)("label",{htmlFor:"expiry",children:"Expiry Date & Time"}),(0,s.jsx)("input",{type:"datetime-local",id:"expiry",value:d,onChange:e=>h(e.target.value)}),N.expiry&&(0,s.jsx)("p",{className:"error",children:N.expiry})]}),(0,s.jsxs)("div",{className:"inputGroup",children:[(0,s.jsx)("label",{htmlFor:"usageLimit",children:"Number of Uses"}),(0,s.jsx)("input",{type:"number",id:"usageLimit",value:p,onClick:()=>m(""),onChange:e=>m(e.target.value),min:"1",placeholder:"Enter usage limit"}),N.usageLimit&&(0,s.jsx)("p",{className:"error",children:N.usageLimit})]}),(0,s.jsxs)("div",{className:"inputGroup",children:[(0,s.jsx)("label",{htmlFor:"cartPrice",children:"Minimum Cart Price (₹)"}),(0,s.jsx)("input",{type:"number",id:"cartPrice",value:u,onClick:()=>x(""),onChange:e=>x(e.target.value),placeholder:"Enter minimum cart price"}),N.cartPrice&&(0,s.jsx)("p",{className:"error",children:N.cartPrice})]})]}),(0,s.jsx)("div",{className:"form-row full-width",children:(0,s.jsxs)("div",{className:"inputGroup",children:[(0,s.jsx)("label",{htmlFor:"terms",children:"Terms & Conditions"}),(0,s.jsx)("textarea",{id:"terms",value:c,onChange:e=>o(e.target.value),placeholder:"Enter terms and conditions"}),N.terms&&(0,s.jsx)("p",{className:"error",children:N.terms})]})}),(0,s.jsx)("button",{className:"submitButton",type:"submit",children:"Create Coupon"})]})]})};t(45050);var b=()=>{let[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)(!0),[l,r]=(0,i.useState)(""),[c,o]=(0,i.useState)(null),[d,h]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/getCoupons");if(!e.ok)throw Error("Failed to fetch coupons");let t=await e.json();a(t)}catch(e){r(e.message)}finally{n(!1)}})()},[]);let p=async(t,s)=>{let i={status:"active"===s?"inactive":"active"};try{if(!(await fetch("/api/updateCoupon/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok)throw Error("Failed to update coupon status");a(e.map(e=>e._id===t?{...e,status:i.status}:e))}catch(e){r(e.message)}},m=e=>{o(e),h(!0)},u=async t=>{try{await fetch("/api/deleteCoupon/".concat(t),{method:"DELETE"}),a(e.filter(e=>e._id!==t))}catch(e){r(e.message)}},x=()=>{h(!1),o(null)},j=async t=>{t.preventDefault();let s={...c};try{if(!(await fetch("/api/updateCoupon/".concat(c._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw Error("Failed to update coupon");a(e.map(e=>e._id===c._id?s:e)),x()}catch(e){r(e.message)}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"All Available Coupons"}),t?(0,s.jsx)("p",{className:"loading",children:"Loading..."}):l?(0,s.jsxs)("p",{children:["Error: ",l]}):(0,s.jsxs)("div",{className:"container-coupon",children:[(0,s.jsxs)("div",{className:"coupon-title",children:[(0,s.jsx)("b",{children:"Coupon Code"}),(0,s.jsx)("b",{children:"Discount(%)"}),(0,s.jsx)("b",{children:"Create/Expiry"}),(0,s.jsx)("b",{children:"Usage Limit"}),(0,s.jsx)("b",{children:"Min Price"}),(0,s.jsx)("b",{children:"Status"}),(0,s.jsx)("b",{children:"Actions"}),(0,s.jsx)("b",{children:"Actions"})]}),(0,s.jsx)("div",{className:"list-coupon",children:e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.code}),(0,s.jsxs)("td",{children:[e.rate,"%"]}),(0,s.jsxs)("td",{children:[(0,s.jsx)("p",{children:"".concat(new Date(e.createdAt).toLocaleDateString("en-GB"),"-").concat(new Date(e.createdAt).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!0}))}),(0,s.jsx)("p",{children:"".concat(new Date(e.expiry).toLocaleDateString("en-GB"),"-").concat(new Date(e.expiry).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!0}))})]}),(0,s.jsx)("td",{children:e.usageLimit}),(0,s.jsxs)("td",{children:["₹",e.cartPrice]}),(0,s.jsx)("td",{children:(0,s.jsxs)("label",{className:"switch",children:[(0,s.jsx)("input",{type:"checkbox",checked:"active"===e.status,onChange:()=>p(e._id,e.status)}),(0,s.jsx)("span",{className:"slider"})]})}),(0,s.jsx)("td",{children:(0,s.jsx)("button",{className:"button-copuon",onClick:()=>m(e),children:"Edit"})}),(0,s.jsx)("td",{children:(0,s.jsx)("img",{src:"/bin.png",alt:"Delete",className:"coupon-image",onClick:()=>u(e._id)})})]},e._id))})]}),d&&(0,s.jsx)("div",{className:"popup",children:(0,s.jsx)("div",{className:"popup-content",children:(0,s.jsxs)("form",{onSubmit:j,children:[(0,s.jsx)("h2",{children:"Edit Coupon"}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("label",{children:["Coupon Code:",(0,s.jsx)("input",{type:"text",value:c.code,onChange:e=>o({...c,code:e.target.value})})]}),(0,s.jsxs)("label",{children:["Discount Rate:",(0,s.jsx)("input",{type:"number",value:c.rate,onChange:e=>o({...c,rate:e.target.value})})]})]}),(0,s.jsxs)("label",{children:["Terms:",(0,s.jsx)("textarea",{value:c.terms,onChange:e=>o({...c,terms:e.target.value})})]}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("label",{children:["Usage Limit:",(0,s.jsx)("input",{type:"number",value:c.usageLimit,onChange:e=>o({...c,usageLimit:e.target.value})})]}),(0,s.jsxs)("label",{children:["Expiry:",(0,s.jsx)("input",{type:"datetime-local",value:c.expiry,onChange:e=>o({...c,expiry:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"form-row",children:[(0,s.jsxs)("label",{children:["Min Cart Price:",(0,s.jsx)("input",{type:"number",value:c.cartPrice,onChange:e=>o({...c,cartPrice:e.target.value})})]}),(0,s.jsxs)("label",{children:["Maximum Discount:",(0,s.jsx)("input",{type:"number",value:c.maxDiscount,onChange:e=>o({...c,maxDiscount:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{type:"submit",children:"Update Coupon"}),(0,s.jsx)("button",{type:"button",onClick:x,children:"Cancel"})]})]})})})]})};t(76215);var f=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"admin-navbar",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{className:"logo",src:"logo.png",alt:""}),(0,s.jsx)("p",{children:"Admin Panel"})]}),(0,s.jsx)("img",{className:"profile-icon",src:"profile_image.png",alt:""})]}),(0,s.jsx)("hr",{})]});t(45610);var C=()=>{let[e,a]=(0,i.useState)(null),[t,n]=(0,i.useState)("/upload_area.png"),[l,r]=(0,i.useState)(""),[c,o]=(0,i.useState)(""),[d,h]=(0,i.useState)(""),p=(0,i.useRef)(null),[m,u]=(0,i.useState)(!1),[x,j]=(0,i.useState)(null),[g,v]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/headerImage");if(e.ok){let a=await e.json();if(a.length>0){let e=a[0];r(e.title),o(e.description),h(e.url),n(e.imagePath),j(e._id)}}else console.error("Error fetching data")}catch(e){console.error("Fetch error:",e)}finally{v(!1)}})()},[]);let y=async()=>{if(!l||!t){alert("Title and image are required!");return}let a=new FormData;a.append("title",l),a.append("description",c),a.append("url",d),e&&a.append("image",e),u(!0);try{let e=await fetch(x?"/api/headerImage?id=".concat(x):"/api/headerImage",{method:x?"PUT":"POST",body:a});e.ok?console.log(x?"Image data updated successfully!":"Image data saved successfully!"):console.error("Error response:",await e.json())}catch(e){console.error("Error:",e)}finally{u(!1)}};return(0,s.jsxs)("div",{className:"header-back",children:[(0,s.jsx)("div",{className:"header-back-title",children:(0,s.jsx)("h2",{children:" Header Image "})}),g?(0,s.jsx)("div",{className:"loading",children:"Loading..."}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"header-container",children:[(0,s.jsx)("div",{className:"image-preview",onClick:()=>p.current.click(),children:(0,s.jsx)("img",{src:t,alt:"Uploaded",className:"preview-img"})}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&(a(t),n(URL.createObjectURL(t)))},ref:p,style:{display:"none"}}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>r(e.target.value),placeholder:"Enter a title",className:"title-input"}),(0,s.jsx)("input",{type:"url",value:d,onChange:e=>h(e.target.value),placeholder:"Enter an optional URL",className:"url-input"}),(0,s.jsx)("textarea",{value:c,onChange:e=>o(e.target.value),placeholder:"Enter a description",rows:"6",className:"description-input"}),(0,s.jsx)("button",{className:"submit-btn",onClick:y,disabled:m,children:m?"Saving...":x?"Update":"Save"})]})})]})};t(44472);let w=e=>{let{checked:a,onChange:t}=e;return(0,s.jsxs)("label",{className:"settable-switch",children:[(0,s.jsx)("input",{type:"checkbox",checked:a,onChange:t}),(0,s.jsx)("span",{className:"settable-slider"})]})};var S=()=>{let[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)(null),[r,d]=(0,i.useState)(!0);(0,i.useEffect)(()=>{(async()=>{try{let e=await j.Z.get("/api/settable");a(e.data)}catch(e){console.error("Failed to fetch tables:",e)}finally{d(!1)}})()},[]);let h=async(t,s)=>{try{await j.Z.patch("/api/settable?id=".concat(t),{tablestatus:s}),a(e.map(e=>e._id===t?{...e,tablestatus:s}:e)),l.Am.success("Table is now ".concat(s))}catch(e){l.Am.error("Failed to update table status"),console.error("Failed to update table status:",e)}},p=a=>{n(e.find(e=>e._id===a))},m=async t=>{try{await j.Z.delete("/api/settable?id=".concat(t)),a(e.filter(e=>e._id!==t)),l.Am.success("Table deleted")}catch(e){l.Am.error("Failed to delete table"),console.error("Failed to delete table:",e)}},u=async t=>{d(!0);try{let s=await j.Z.put("/api/settable?id=".concat(t._id),t);a(e.map(e=>e._id===t._id?s.data:e)),n(null),l.Am.success("Table updated")}catch(e){l.Am.error("Failed to update table"),console.error("Failed to update table:",e)}finally{d(!1)}};return(0,s.jsxs)("div",{className:"settable-container",children:[(0,s.jsx)("h2",{className:"top-second-title",children:"Manage Tables"}),r?(0,s.jsxs)("div",{className:"loading-container",children:[(0,s.jsx)("div",{className:"loading"}),(0,s.jsx)("p",{className:"loading",children:" Loading tables..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"settable-header",children:[(0,s.jsx)("span",{children:"Table Name"}),(0,s.jsx)("span",{children:"Total Seats"}),(0,s.jsx)("span",{children:"Status"}),(0,s.jsx)("span",{children:"Table Status"}),(0,s.jsx)("span",{children:"Action"}),(0,s.jsx)("span",{children:"Update"}),(0,s.jsx)("span",{children:"Delete"})]}),(0,s.jsx)("div",{className:"settable-list",children:e.map((e,a)=>(0,s.jsxs)("div",{className:"settable-row ".concat(a%2==0?"even":"odd"),children:[(0,s.jsx)("span",{children:e.tableName}),(0,s.jsxs)("span",{children:[e.seatNumber," Seats"]}),(0,s.jsx)("span",{children:e.status.charAt(0).toUpperCase()+e.status.slice(1).toLowerCase()}),(0,s.jsx)("span",{children:e.tablestatus.charAt(0).toUpperCase()+e.tablestatus.slice(1).toLowerCase()}),(0,s.jsx)("span",{children:(0,s.jsx)(w,{checked:"active"===e.tablestatus,onChange:()=>h(e._id,"active"===e.tablestatus?"inactive":"active")})}),(0,s.jsx)("span",{className:"settable-actions",children:(0,s.jsx)("button",{onClick:()=>p(e._id),className:"btn-edit",children:"Edit"})}),(0,s.jsx)("span",{className:"settable-actions",children:(0,s.jsx)("img",{src:"/bin.png",alt:"Delete",className:"delete-image",onClick:()=>m(e._id)})})]},e._id))})]}),t&&(0,s.jsx)("div",{className:"settable-popup",children:(0,s.jsxs)("div",{className:"settable-popup-content",children:[(0,s.jsxs)("div",{className:"title-top",children:[(0,s.jsx)("h3",{children:"Edit Table"}),(0,s.jsxs)("button",{onClick:()=>n(null),className:"btn-cancel",children:[(0,s.jsx)(c.G,{icon:o.NBC})," "]})]}),(0,s.jsxs)("div",{className:"form-group1",children:[(0,s.jsx)("label",{htmlFor:"tableName",className:"label",children:"Table Name"}),(0,s.jsx)("input",{type:"text",value:t.tableName,onChange:e=>n({...t,tableName:e.target.value}),placeholder:"Table Name"})]}),(0,s.jsxs)("div",{className:"form-group1",children:[(0,s.jsx)("label",{htmlFor:"seatNumber",className:"label",children:"Total Seat"}),(0,s.jsx)("input",{type:"number",value:t.seatNumber,onChange:e=>n({...t,seatNumber:e.target.value}),placeholder:"Total Seats"})]}),(0,s.jsx)("div",{className:"popup-actions",children:(0,s.jsx)("button",{onClick:()=>u(t),className:"btn-update",disabled:r,children:r?"Update...":"Update Table"})})]})}),(0,s.jsx)(l.Ix,{})]})};t(11676);var k=()=>{let[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)({min:"",max:"",fee:""}),[l,r]=(0,i.useState)(null),[c,o]=(0,i.useState)(!1),[d,h]=(0,i.useState)(!1),[p,m]=(0,i.useState)(!1),[u,x]=(0,i.useState)(!1),j=async()=>{h(!0);try{let e=await fetch("/api/delivery-range"),{data:t}=await e.json();a(t)}catch(e){console.error("Error fetching ranges:",e)}finally{h(!1)}};(0,i.useEffect)(()=>{j()},[]);let g=e=>{let{name:a,value:t}=e.target;n(e=>({...e,[a]:t}))},v=async()=>{let{min:e,max:a,fee:s}=t;if(e&&a&&s){m(!0);try{(await fetch("/api/delivery-range",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({min:e,max:a,fee:s})})).ok&&(j(),n({min:"",max:"",fee:""}))}catch(e){console.error("Error adding range:",e)}finally{m(!1)}}},y=async e=>{try{await fetch("/api/delivery-range",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),j()}catch(e){console.error("Error deleting range:",e)}},N=e=>{r(e),o(!0)},b=()=>{r(null),o(!1)},f=async()=>{let{_id:e,min:a,max:t,fee:s}=l;x(!0);try{(await fetch("/api/delivery-range",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,min:a,max:t,fee:s})})).ok&&(j(),b())}catch(e){console.error("Error updating range:",e)}finally{x(!1)}};return(0,s.jsxs)("div",{className:"delivery-fee-container",children:[(0,s.jsxs)("div",{className:"add-range-form",children:[(0,s.jsx)("h3",{className:"title-delivery",children:"Add New Range"}),(0,s.jsx)("input",{type:"number",name:"min",value:t.min,onChange:g,placeholder:"Min Distance (km)"}),(0,s.jsx)("input",{type:"number",name:"max",value:t.max,onChange:g,placeholder:"Max Distance (km)"}),(0,s.jsx)("input",{type:"number",name:"fee",value:t.fee,onChange:g,placeholder:"Fee (₹)"}),(0,s.jsx)("button",{type:"button",onClick:v,className:"submit-btn",children:p?(0,s.jsx)("span",{className:"spinner"}):"Add Range"})]}),(0,s.jsxs)("div",{className:"range-display",children:[(0,s.jsx)("h3",{className:"title-delivery1",children:"Defined Ranges and Fees"}),(0,s.jsx)("ul",{className:"ranges-list",children:d?(0,s.jsx)("p",{className:"loading",children:"Loading..."}):e.map((e,a)=>(0,s.jsxs)("li",{className:"range-item",children:[(0,s.jsxs)("div",{className:"range-distance",children:[(0,s.jsxs)("span",{children:[e.min," km"]})," ---- ",(0,s.jsxs)("span",{children:[e.max," km"]})]}),(0,s.jsxs)("div",{className:"range-fee",children:["₹",e.fee]}),(0,s.jsx)("div",{className:"range-actions",children:(0,s.jsx)("button",{className:"edit-btn",onClick:()=>N(e),children:"Update"})}),(0,s.jsx)("div",{className:"range-actions",children:(0,s.jsx)("button",{className:"delete-btn-fee",onClick:()=>y(e._id),children:"\xd7"})})]},a))})]}),c&&(0,s.jsx)("div",{className:"popup-overlay",children:(0,s.jsxs)("div",{className:"popup",children:[(0,s.jsx)("div",{className:"popup-title-range",children:(0,s.jsx)("h3",{className:"popup-title",children:"Edit Range"})}),(0,s.jsxs)("div",{className:"popup-delivery",children:[(0,s.jsxs)("div",{className:"popup-field",children:[(0,s.jsx)("label",{htmlFor:"min",children:"Min Distance (km)"}),(0,s.jsx)("input",{type:"number",name:"min",value:l.min,onChange:e=>r(a=>({...a,min:e.target.value}))})]}),(0,s.jsxs)("div",{className:"popup-field",children:[(0,s.jsx)("label",{htmlFor:"max",children:"Max Distance (km)"}),(0,s.jsx)("input",{type:"number",name:"max",value:l.max,onChange:e=>r(a=>({...a,max:e.target.value}))})]}),(0,s.jsxs)("div",{className:"popup-field",children:[(0,s.jsx)("label",{htmlFor:"fee",children:"Fee (₹)"}),(0,s.jsx)("input",{type:"number",name:"fee",value:l.fee,onChange:e=>r(a=>({...a,fee:e.target.value}))})]})]}),(0,s.jsxs)("div",{className:"popup-buttons",children:[(0,s.jsx)("button",{className:"close-btn",onClick:b,children:"Close"}),(0,s.jsx)("button",{className:"update-btn",onClick:f,children:u?(0,s.jsx)("span",{className:"spinner"}):"Update"})]})]})})]})};t(18469);var E=()=>{let[e,a]=(0,i.useState)([]),[t,n]=(0,i.useState)([]),[l,r]=(0,i.useState)([]),[c,o]=(0,i.useState)([]),[d,h]=(0,i.useState)(!0),[p,m]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/printers");if(!e.ok)throw Error("Failed to fetch printer details");let t=await e.json();a(t.printers)}catch(e){m(e.message)}finally{h(!1)}})()},[]);let u=(e,a)=>{""!==a&&("delivery"===e?n([...t,a]):"table"===e?r([...l,a]):"kitchen"===e&&o([...c,a]))},x=(e,a)=>{"delivery"===e?n(t.filter((e,t)=>t!==a)):"table"===e?r(l.filter((e,t)=>t!==a)):"kitchen"===e&&o(c.filter((e,t)=>t!==a))},j=a=>e.filter(e=>!a.includes(e.name));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"ConnectedPrinters",children:"Connected Printers"}),(0,s.jsx)("div",{className:"printer-container",children:d?(0,s.jsxs)("div",{className:"loading",children:[(0,s.jsx)("div",{className:"spinner"}),(0,s.jsx)("span",{children:"Loading..."})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"printer-container1",children:[(0,s.jsx)("h3",{className:"printer-title1",children:"Select Printers for Delivery, Table, and Kitchen Bills"}),(0,s.jsxs)("div",{className:"printer-columns1",children:[(0,s.jsxs)("div",{className:"printer-column1",children:[(0,s.jsx)("h4",{className:"column-title1",children:"Delivery Bill"}),t.map((e,a)=>(0,s.jsxs)("div",{className:"printer-row1 selected1",children:[(0,s.jsxs)("label",{className:"printer-label1",children:["Printer ",a+1,":"]}),(0,s.jsx)("span",{className:"printer-name1",children:e}),(0,s.jsx)("span",{className:"delete-icon1",onClick:()=>x("delivery",a),children:(0,s.jsx)("img",{src:"bin.png",alt:"Delete",className:"delete-icon-image1"})})]},"delivery-".concat(a))),j(t).length>0&&(0,s.jsxs)("div",{className:"printer-row1",children:[(0,s.jsx)("label",{className:"printer-label1",children:"Add Printer:"}),(0,s.jsxs)("select",{className:"printer-select1",onChange:e=>u("delivery",e.target.value),value:"",children:[(0,s.jsx)("option",{value:"",children:"-- Select Printer --"}),j(t).map((e,a)=>(0,s.jsx)("option",{value:e.name,children:e.name},"delivery-option-".concat(a)))]})]})]}),(0,s.jsxs)("div",{className:"printer-column1",children:[(0,s.jsx)("h4",{className:"column-title1",children:"Table Bill"}),l.map((e,a)=>(0,s.jsxs)("div",{className:"printer-row1 selected1",children:[(0,s.jsxs)("label",{className:"printer-label1",children:["Printer ",a+1,":"]}),(0,s.jsx)("span",{className:"printer-name1",children:e}),(0,s.jsx)("span",{className:"delete-icon1",onClick:()=>x("table",a),children:(0,s.jsx)("img",{src:"bin.png",alt:"Delete",className:"delete-icon-image1"})})]},"table-".concat(a))),j(l).length>0&&(0,s.jsxs)("div",{className:"printer-row1",children:[(0,s.jsx)("label",{className:"printer-label1",children:"Add Printer:"}),(0,s.jsxs)("select",{className:"printer-select1",onChange:e=>u("table",e.target.value),value:"",children:[(0,s.jsx)("option",{value:"",children:"-- Select Printer --"}),j(l).map((e,a)=>(0,s.jsx)("option",{value:e.name,children:e.name},"table-option-".concat(a)))]})]})]}),(0,s.jsxs)("div",{className:"printer-column1",children:[(0,s.jsx)("h4",{className:"column-title1",children:"Kitchen Bill"}),c.map((e,a)=>(0,s.jsxs)("div",{className:"printer-row1 selected1",children:[(0,s.jsxs)("label",{className:"printer-label1",children:["Printer ",a+1,":"]}),(0,s.jsx)("span",{className:"printer-name1",children:e}),(0,s.jsx)("span",{className:"delete-icon1",onClick:()=>x("kitchen",a),children:(0,s.jsx)("img",{src:"bin.png",alt:"Delete",className:"delete-icon-image1"})})]},"kitchen-".concat(a))),j(c).length>0&&(0,s.jsxs)("div",{className:"printer-row1",children:[(0,s.jsx)("label",{className:"printer-label1",children:"Add Printer:"}),(0,s.jsxs)("select",{className:"printer-select1",onChange:e=>u("kitchen",e.target.value),value:"",children:[(0,s.jsx)("option",{value:"",children:"-- Select Printer --"}),j(c).map((e,a)=>(0,s.jsx)("option",{value:e.name,children:e.name},"kitchen-option-".concat(a)))]})]})]})]})]})})})]})},A=t(91688);t(99706);var F=()=>{let[e,a]=(0,i.useState)(""),[t,n]=(0,i.useState)([]),[l,r]=(0,i.useState)(null),[c,o]=(0,i.useState)(!1),[d,h]=(0,i.useState)(!0),p=async()=>{h(!0);try{let e=await j.Z.get("/api/captains");n(e.data)}catch(e){console.error("Error fetching captains:",e)}h(!1)};(0,i.useEffect)(()=>{p()},[]);let m=async()=>{if(e.trim()){o(!0);try{l?await j.Z.put("/api/captains/".concat(l),{name:e}):await j.Z.post("/api/captains",{name:e}),a(""),r(null),p()}catch(e){console.error("Error adding/updating captain:",e)}o(!1)}},u=(e,t)=>{a(t),r(e)},x=async e=>{o(!0);try{await j.Z.delete("/api/captains/".concat(e)),p()}catch(e){console.error("Error deleting captain:",e)}o(!1)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"captain-container",children:[(0,s.jsx)(A.E.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"title",children:"Add Captain"}),(0,s.jsx)("label",{className:"input-label",children:"Captain Name:"}),(0,s.jsx)(A.E.input,{type:"text",value:e,onChange:e=>a(e.target.value),className:"input-box",placeholder:"Enter Captain Name",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3}}),(0,s.jsx)(A.E.button,{onClick:m,className:"add-button ".concat(c?"loading":""),disabled:c,whileHover:c?{}:{scale:1.05},whileTap:c?{}:{scale:.95},children:c?"Loading...":l?"Update Captain":"Add Captain"})]}),d?(0,s.jsx)("p",{className:"loading-indicator",children:"Fetching Captains..."}):t.length>0&&(0,s.jsx)("div",{className:"table-container",children:(0,s.jsx)("ul",{className:"captain-list",children:t.map((e,a)=>(0,s.jsxs)(A.E.li,{className:"captain-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*a},children:[(0,s.jsx)("span",{children:e.name}),(0,s.jsxs)("div",{className:"button-group2",children:[(0,s.jsx)("button",{className:"edit-btn2",onClick:()=>u(e._id,e.name),children:"Update"}),(0,s.jsx)("button",{className:"delete-btn2",onClick:()=>x(e._id),children:"Delete"})]})]},e._id))})})]})};t(8907);var T=()=>{let e;let[a,t]=(0,i.useState)(""),[n,l]=(0,i.useState)([]),[r,c]=(0,i.useState)([]),[o,d]=(0,i.useState)([]),[h,p]=(0,i.useState)(null),[m,u]=(0,i.useState)(["","","",""]),[x,g]=(0,i.useState)([]),[v,y]=(0,i.useState)(!0);(0,i.useEffect)(()=>{b(),f(),N()},[]);let N=async()=>{try{let e=await j.Z.get("/api/vectory");g(e.data.data)}catch(e){console.error("Error fetching vectory captains:",e)}},b=async()=>{try{let e=await j.Z.get("/api/captain2");l(e.data.data)}catch(e){console.error("Error fetching captains:",e)}},f=async()=>{try{let e=await j.Z.get("/api/tablesview");c(e.data.tables.map(e=>({name:e.tableName})))}catch(e){console.error("Error fetching tables:",e)}finally{y(!1)}},C=e=>{d(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},w=async()=>{if(!a||m.some(e=>""===e))return;let e={name:a,pin:m.join(""),tables:o};try{h?await j.Z.put("/api/vectory",{id:h,...e}):await j.Z.post("/api/vectory",e),N(),E()}catch(e){console.error("Error saving captain:",e)}},S=e=>{let a=x.find(a=>a._id===e);a&&(t(a.name),u(a.pin.split("")),d(a.tables||[]),p(e))},k=async e=>{if(window.confirm("Are you sure you want to delete this captain?"))try{await j.Z.delete("/api/vectory",{data:{id:e}}),N()}catch(e){console.error("Error deleting captain:",e)}},E=()=>{t(""),u(["","","",""]),d([]),p(null)},A=(e=new Set,x.forEach(a=>{a._id!==h&&a.tables.forEach(a=>e.add(a))}),e),F=n.map(e=>({...e,assigned:x.some(a=>a.name===e.name)}));return(0,s.jsxs)("div",{className:"captain-container",children:[(0,s.jsx)("h2",{children:"Assign Captain"}),v?(0,s.jsx)("p",{className:"loading-text",children:"Loading..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("select",{onChange:e=>t(e.target.value),value:a,children:[(0,s.jsx)("option",{value:"",children:"Select Captain"}),F.map((e,a)=>(0,s.jsxs)("option",{value:e.name,disabled:e.assigned,children:[e.name," ",e.assigned?"(Assigned)":""]},a))]}),(0,s.jsxs)("div",{className:"pin-container",children:[(0,s.jsx)("label",{children:"Create PIN:"}),(0,s.jsx)("div",{className:"pin-inputs",children:m.map((e,a)=>(0,s.jsx)("input",{id:"pin-".concat(a),type:"text",maxLength:"1",value:e,onChange:e=>{if(/^[0-9]?$/.test(e.target.value)){let t=[...m];t[a]=e.target.value,u(t),e.target.value&&a<3&&document.getElementById("pin-".concat(a+1)).focus()}}},a))})]}),(0,s.jsxs)("div",{className:"table-selection",children:[(0,s.jsx)("h3",{children:"Select Tables:"}),(0,s.jsx)("div",{className:"tables",children:r.map((e,a)=>{let t=o.includes(e.name),i=A.has(e.name);return(0,s.jsx)("div",{className:"table ".concat(t?"selected":""," ").concat(i?"disabled":""),onClick:()=>!i&&C(e.name),children:e.name},a)})})]}),(0,s.jsx)("button",{className:"create-button",onClick:w,children:h?"Update Captain":"Create Captain"}),(0,s.jsxs)("div",{className:"captain-list",children:[(0,s.jsx)("h3",{children:"Assigned Captains"}),0===x.length?(0,s.jsx)("p",{className:"no-data",children:"No captains assigned."}):x.map(e=>(0,s.jsxs)("div",{className:"captain-item",children:[(0,s.jsxs)("span",{children:[e.name," (PIN: ",e.pin,") - Tables: ",e.tables.join(", ")]}),(0,s.jsx)("button",{onClick:()=>S(e._id),children:"Update"}),(0,s.jsx)("button",{onClick:()=>k(e._id),children:"Delete"})]},e._id))]})]})]})},P=()=>{let[e,a]=(0,i.useState)("Orders");return(0,s.jsxs)("div",{className:"admin-panel",children:[(0,s.jsx)(f,{}),(0,s.jsxs)("div",{className:"admin-panel-content",children:[(0,s.jsx)(n,{setSelectedComponent:a}),(0,s.jsx)("div",{className:"admin-panel-right",children:(()=>{switch(l.Ix,e){case"AddItems":return(0,s.jsx)(r,{});case"ListItems":return(0,s.jsx)(h,{});case"Orders":return(0,s.jsx)(m,{});case"AddCategory":return(0,s.jsx)(x,{});case"Payment":return(0,s.jsx)(g,{});case"Admin":return(0,s.jsx)(v,{});case"Gst":return(0,s.jsx)(y,{});case"Coupon":return(0,s.jsx)(N,{});case"Couponlist":return(0,s.jsx)(b,{});case"headerimage":return(0,s.jsx)(C,{});case"Settable":return(0,s.jsx)(S,{});case"deliveryFee":return(0,s.jsx)(k,{});case"printer":return(0,s.jsx)(E,{});case"addcaptain":return(0,s.jsx)(F,{});case"captain":return(0,s.jsx)(T,{});default:return}})()})]})]})}}},function(e){e.O(0,[976,847,443,603,66,472,221,888,774,179],function(){return e(e.s=70297)}),_N_E=e.O()}]);