(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{36429:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(53474)}])},53474:function(e,n,s){"use strict";s.r(n);var i=s(85893),a=s(67294),l=s(11163),t=s(99603),o=s(59417);s(93859),n.default=()=>{let[e,n]=(0,a.useState)(""),[s,c]=(0,a.useState)(""),[r,d]=(0,a.useState)(""),[u,_]=(0,a.useState)(!1),[m,g]=(0,a.useState)(!1),h=(0,l.useRouter)(),[x,p]=(0,a.useState)("/AdminPanel");(0,a.useEffect)(()=>{let e=h.query.redirect;e&&p(e)},[h.query.redirect]);let N=async n=>{n.preventDefault(),g(!0),d("");try{let n=await fetch("/api/loginadmin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),i=await n.json();n.ok?(document.cookie="adminId=".concat(i.token,"; path=/; max-age=3600"),h.push(x)):d(i.message||"Invalid credentials.")}catch(e){d("Something went wrong. Please try again.")}finally{g(!1)}};return(0,i.jsxs)("div",{className:"login",children:[(0,i.jsx)("img",{src:"food8.jpg",alt:"Login Background",className:"login__img"}),(0,i.jsxs)("form",{onSubmit:N,className:"login__form",children:[(0,i.jsx)("h1",{className:"login__title",children:"Admin Login"}),(0,i.jsxs)("div",{className:"login__content",children:[(0,i.jsxs)("div",{className:"login__box",children:[(0,i.jsx)(t.G,{icon:o.byT,className:"login__icon"}),(0,i.jsxs)("div",{className:"login__box-input",children:[(0,i.jsx)("input",{type:"text",required:!0,className:"login__input ".concat(e?"filled":""),value:e,onChange:e=>n(e.target.value)}),(0,i.jsx)("label",{htmlFor:"",className:"login__label ".concat(e?"hidden":""),children:"Username"})]})]}),(0,i.jsxs)("div",{className:"login__box",children:[(0,i.jsx)(t.G,{icon:o.DD4,className:"login__icon"}),(0,i.jsxs)("div",{className:"login__box-input",children:[(0,i.jsx)("input",{type:u?"text":"password",required:!0,className:"login__input ".concat(s?"filled":""),value:s,onChange:e=>c(e.target.value)}),(0,i.jsx)("label",{htmlFor:"",className:"login__label ".concat(s?"hidden":""),children:"Password"}),(0,i.jsx)(t.G,{onClick:()=>{_(!u)},icon:u?o.Aq:o.Mdf,className:"login__eye"})]})]})]}),r&&(0,i.jsx)("p",{className:"error-message",children:r}),(0,i.jsx)("button",{type:"submit",className:"login__button",disabled:m,children:m?(0,i.jsx)("div",{className:"spinner-login",children:(0,i.jsx)("div",{className:"spinner"})}):"Login"})]})]})}},93859:function(){},11163:function(e,n,s){e.exports=s(37253)}},function(e){e.O(0,[976,603,888,774,179],function(){return e(e.s=36429)}),_N_E=e.O()}]);